{
  "comments": [
    {
      "key": {
        "uuid": "ba60ed30_8662547c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000789
      },
      "writtenOn": "2020-03-25T07:57:49Z",
      "side": 1,
      "message": "Do you know whether this is this a general Qt problem?\nI did not get that warning with the following small sample program.\n\n(If it\u0027s reasonably easy to find out whether it\u0027s actually a Qt bug, I think it\u0027d be nice to have it reported upstream, maybe in addition to this fix.)\n\n#include \u003cQApplication\u003e\n#include \u003cQClipboard\u003e\n#include \u003cQMimeData\u003e\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    QClipboard* pClipBoard \u003d QApplication::clipboard();\n\n    QMimeData* pMimeData \u003d new QMimeData;\n    pClipBoard-\u003eclear();\n    pClipBoard-\u003esetMimeData(pMimeData);\n\n    // return a.exec();\n    return 0;\n}",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 12,
        "endChar": 21
      },
      "revId": "69461f40de2354173fe63466f83284426153dddc",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb7cea7d_582e0fbd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000562
      },
      "writtenOn": "2020-03-25T08:52:48Z",
      "side": 1,
      "message": "No. \"Directly\" is the wrong word. For debugging I added logging to the Qt5Clipboard code to all the (three) places and the change handler, which manipulate the clipboard (clear and setMimeData). After the failures, the change handler reported no Qt5MimeData in the clipboard. I couldn\u0027t find a minimal reproducer. It might also be D\u0027n\u0027D related.\n\nNow thinking about this again, I never checked, if the clipboard calls were eventually done from Qt5Clipboard::handleChanged. But that would quite probably result in a recursion - or not, since the clear wont recurse into lostOwnership - hmmm...\n\nI just know that omitting the clear before the 2nd setMimeData fixes / works around the bug.\n\nSince all this goes through setContents, there is potentially a lot of stuff going on in between.\n\nBTW: this is all triggered by the fire_drop function.\n\nI would be happy to have some other fix, as I don\u0027t really trust in it and think it might just paper over the real bug I couldn\u0027t identify.",
      "parentUuid": "ba60ed30_8662547c",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 12,
        "endChar": 21
      },
      "revId": "69461f40de2354173fe63466f83284426153dddc",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": true
    }
  ]
}