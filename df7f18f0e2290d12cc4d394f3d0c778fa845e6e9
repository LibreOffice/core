{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "66363f9a_70400e24",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000446
      },
      "writtenOn": "2021-10-12T20:51:16Z",
      "side": 1,
      "message": "Overlapping redlines ARE a thing, at least in Word. So we have to (and do!) support it to a degree. \nSee https://bugs.documentfoundation.org/show_bug.cgi?id\u003d142387 for such an example. \nEven the Manage changes dialog displays it in a \"structured\" way.\nOpening that particular file would hit this assert with this patch:\n\nsoffice.bin: /home/gabor/src/core/sw/source/core/doc/DocumentRedlineManager.cxx:2292: virtual IDocumentRedlineAccess::AppendResult sw::DocumentRedlineManager::AppendRedline(SwRangeRedline*, bool): Assertion `ret || !pNewRedl\u0027 failed.\n\n\nNot having overlapping redlines in ODF is bug https://bugs.documentfoundation.org/show_bug.cgi?id\u003d56266 \nand the example in https://bugs.documentfoundation.org/show_bug.cgi?id\u003d39721 also shows it\u0027s easy to create overlapping redlines (moving a numbered paragraph containing redline up/down with the toolbar is a cut\u0026paste... which too hits the above assert).\n\nWith more support for tracking text formatting and table structure changes added recently, I think overlapping redlines will only get more and more common and easy to create.\n\nSo please don\u0027t do this.",
      "revId": "df7f18f0e2290d12cc4d394f3d0c778fa845e6e9",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "95bd3cbf_c2b38344",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000083
      },
      "writtenOn": "2021-10-13T07:14:22Z",
      "side": 1,
      "message": "\u003e \n\u003e So please don\u0027t do this.\n\nAh, that is a pity.\n\nWe will need a much fancier index to search redlines then, probably some kind of 1-D version of a spatial index.",
      "parentUuid": "66363f9a_70400e24",
      "revId": "df7f18f0e2290d12cc4d394f3d0c778fa845e6e9",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f8bc7467_1175f9d3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001002
      },
      "writtenOn": "2021-10-13T08:03:48Z",
      "side": 1,
      "message": "Indeed, also writerfilter uses overlapping redlines to handle tracked formatting changes since\n\ncommit 9dbf817fe5c5253fba0831aefa17575ae0ba3af1\nAuthor: Luboš Luňák \u003cl.lunak@collabora.com\u003e\nDate:   Wed Oct 1 19:12:47 2014 +0200\n\n    handle scope of w:pPrChange and w:rPrChange properly (bnc#821804)\n\n...\n+    // Writer core \"officially\" does not like overlapping redlines, and its UNO interface is stupid enough\n+    // to not prevent that. However, in practice in fact everything appears to work fine (except for the debug warnings\n+    // about redline table corruption, which may possibly be harmless in reality). So leave this as it is, since this\n+    // is a better representation of how the changes happened. If this will ever become a problem, overlapping redlines\n+    // will need to be merged into one, just like doing the changes in the UI does, which will lose some information\n+    // (and so if that happens, it may be better to fix Writer).\n+    // Create the redlines here from lowest (formats) to highest (inserts/removals) priority, since the last one is\n+    // what Writer presents graphically, so this will show deletes as deleted text and not as just formatted text being there.\n\nYou are right, we need a better data structure for redlines. (I just recognized, that using GetRedlineText() with its O(n) performance could be dangerous in a big table, so I must optimize \n\ncommit 915d3eebc1dc4f18d7a1992db801ee8313ee46c0\nAuthor: László Németh \u003cnemeth@numbertext.org\u003e\nDate:   Tue Sep 21 15:11:38 2021 +0200\n\n    tdf#39828 sw: fix table formula calculation at track changes\n\na little bit.)\n",
      "revId": "df7f18f0e2290d12cc4d394f3d0c778fa845e6e9",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6ed801ec_10d98a2b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1001002
      },
      "writtenOn": "2021-10-13T10:18:13Z",
      "side": 1,
      "message": "(Note: I have already started to add tracking of paragraph formatting changes, but because of the incomplete handling of overlapping redlines, a text change will accept this change automatically, see\n\ncommit 694a6389e84d5b416cde6dde2d5eaa589a0a6493\nAuthor: László Németh \u003cnemeth@numbertext.org\u003e\nDate:   Thu Sep 6 17:21:05 2018 +0200\n\n    tdf#119019 DOCX track changes: fix invisible delete and insert\n    \n    during editing in a paragraph with tracked paragraph formatting,\n    by accepting the old formatting change automatically in the\n    actual paragraph before text deletion/insertion.\n    \n    Note: it\u0027s not possible to reject paragraph formatting\n    changes in LO, but showing them is a minimal requirement.\n    Now they are still visible in change tracking dialog and\n    by the vertical line before the related paragraphs until\n    there are no new text deletions and insertions in those\n    paragraphs.\n\n(and there was other problem with the overlapping import:\n\ncommit 4b850b204fbbe13e3ed11434f262dfabe528241a\nAuthor: László Németh \u003cnemeth@numbertext.org\u003e\nDate:   Thu Nov 29 11:10:38 2018 +0100\n\n    tdf#119824 fix undo/redo of overlapping redlines\n    \n    Overlapping redlines (introduced by the\n    commit 9dbf817fe5c5253fba0831aefa17575ae0ba3af1\n    \"handle scope of w:pPrChange and w:rPrChange properly\"\n    for showing tracked DOCX paragraph formatting) resulted\n    losing of tracked deletion, ie. reappearing deleted\n    content using Redo (reported after fixing the broken\n    non-visible change tracking with overlapping redlines in\n    commit 694a6389e84d5b416cde6dde2d5eaa589a0a6493\n    \"tdf#119019 DOCX track changes: fix invisible delete\n    and insert\").\n)",
      "parentUuid": "f8bc7467_1175f9d3",
      "revId": "df7f18f0e2290d12cc4d394f3d0c778fa845e6e9",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}