{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6bc1b924_582acca9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002115
      },
      "writtenOn": "2021-09-23T20:15:19Z",
      "side": 1,
      "message": "Hi! AFAIK this should cover the leap year scenarios for the Gregorian/Julian calendar. What do you think? Automated test cases are still missing, though.",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5b33f1b0_845c625c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-09-24T05:39:31Z",
      "side": 1,
      "message": "Nice - thanks!",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e531a0bb_9aa2340c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-09-24T06:08:10Z",
      "side": 1,
      "message": "But even though the change itself seems OK, it would likely not resolve tdf#144687 in full itself: e.g., it will likely to give wrong results at some Dec 25th (Julian), when proleptic Gregorian gives the next year already. Just check what \u0027\u003dYEAR(\"1581-12-22\")\u0027 gives ;)",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d28054f8_05f82fcd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-09-24T06:16:02Z",
      "side": 1,
      "message": "Andreas: we have a major problem here.\n\nWe need to decide globally how to deal with the Gregorian/Julian cutover in general. It is just too large, and potentially compatibility-breaking. Maybe we need a configuration, that would allow to use and display proleptic Gregorian or Julian everywhere; or maybe we may use some new set of functions; or introduce a locale flag or a calendar or function argument ...",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7f1a9fce_c3c344aa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-09-24T06:24:13Z",
      "side": 1,
      "message": "Note how \u003dDATE(1582;1;1) gives error - likely because ScInterpreter::GetDateSerial checks Date::IsValidAndGregorian",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "27fc1367_5d5e9059",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-09-24T06:26:40Z",
      "side": 1,
      "message": "Note also, how use of Julian calendar makes \u0027YYYY-MM-DD\u0027 *not* a valid ISO format *in LO* - just because ISO requires that all dates are sequential, and Cals has the sequence break at the cutover.",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "99cd730f_802e3a1a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-09-24T06:44:36Z",
      "side": 1,
      "message": "Actually, maybe the simplest would be to settle on proleptic Gregorian everywhere, and introduce a compatibility option to not break older documents. There is an API for ICU to set the cutover date; setting it to the start of ICU\u0027s date range would make ICU to use Gregorian everywhere. Then all our calculations would start being correct...",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "73fde70c_4c8e85d9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002115
      },
      "writtenOn": "2021-09-24T09:16:21Z",
      "side": 1,
      "message": "For me this could be a viable solution, but I don\u0027t have the insight where in the UI this option should be set, and I think there are a lot of places where data functions are in use or a dates are calculated.",
      "parentUuid": "99cd730f_802e3a1a",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a4481a39_17497d19",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002115
      },
      "writtenOn": "2021-09-24T09:16:21Z",
      "side": 1,
      "message": "Ya, I thougth that this would just solve the ISLEAPYEAR problem",
      "parentUuid": "e531a0bb_9aa2340c",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4804baa4_5d12f1c8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002115
      },
      "writtenOn": "2021-09-24T09:16:21Z",
      "side": 1,
      "message": "Sometimes I sit at home after a work day and think to myself that I could fix a small bug/enhancement in LO. I thought, hm, the years function has an internal limit. Lets check it out ... and then a small commit in order to test this issue stirred up a hornets\u0027 nest ðŸ˜„",
      "parentUuid": "d28054f8_05f82fcd",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fbdb2420_0df99783",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1002115
      },
      "writtenOn": "2021-09-24T09:22:09Z",
      "side": 1,
      "message": "I have read your report in tdf#144699. This could solve a lot of problems, but I think not all of them since there are a lot of hardcoded places: https://opengrok.libreoffice.org/search?full\u003d\"1582\"\u0026project\u003dcore",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e44e18eb_94c3b14b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-09-24T09:24:02Z",
      "side": 1,
      "message": "\u003e I thougth that this would just solve the ISLEAPYEAR problem\n\nI meant, it would not even fix ISLEAPYEAR in full: \u003dISLEAPYEAR(\"1100-12-31\") would still give FALSE.\n\n\u003e Sometimes I sit at home ...\n\nYeah ðŸ˜Š Happens to me, too ðŸ˜‰",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1928f354_2a1eb202",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-09-24T09:37:38Z",
      "side": 1,
      "message": "Hmm. I don\u0027t see problems there? :)\n\n* calendar_hijri.cxx just discards everything before the cutoff -\u003e no problem (we may keep it, or extend it, as we want / as reasonable; bein safe and keeping current status is safe, and I don\u0027t see it as an \"existing problem\" that needs resolving?).\n* IsValidAndGregorian() uses need to be checked (and btw used in calendar_hijri.cxx); but those seem to also mostly limit allowed range, and previous bullet\u0027s reasoning apply. The only suspicious place that I see is in SfxMedium::IsExpired, which returns false for all non-Gregorian dates, and which is likely (insignificant) bug ;)\n* GetDateSerial is likely subject to relax the requirement - but no problem is keep it.\n* lcl_CalcJulDate in connectivity/source/drivers/dbase/DTable.cxx is an own case, unrelated to everything else, ... but maybe needs checking.\n\nGenerally it seems much less problematic than I feared ðŸ˜Š",
      "parentUuid": "fbdb2420_0df99783",
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6cf6d3a_55b32344",
        "filename": "scaddins/source/datefunc/datefunc.cxx",
        "patchSetId": 1
      },
      "lineNbr": 315,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-09-24T05:39:31Z",
      "side": 1,
      "message": "I\u0027d keep the clean and telling \u0027% 4\u0027: all today\u0027s compilers would optimize both into the same bytecode, so no need for such micro-optimizations.",
      "range": {
        "startLine": 315,
        "startChar": 27,
        "endLine": 315,
        "endChar": 32
      },
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "336e4085_4e9d29b9",
        "filename": "scaddins/source/datefunc/datefunc.cxx",
        "patchSetId": 1
      },
      "lineNbr": 315,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-09-24T06:03:13Z",
      "side": 1,
      "message": "Just make it \u0027\u003e 1582\u0027. 1582-10-15 was the ~end of the year, so even though it doesn\u0027t matter in practice (1582 was not leap in either calendar), it seems pedantically more correct to use \u0027\u003e\u0027 here.",
      "parentUuid": "e6cf6d3a_55b32344",
      "range": {
        "startLine": 315,
        "startChar": 27,
        "endLine": 315,
        "endChar": 32
      },
      "revId": "1d2128e11fca49d057bdf18589bfc9adb5346ae0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}