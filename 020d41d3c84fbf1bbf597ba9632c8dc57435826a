{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7ea2340a_ad6d19f2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 33,
      "author": {
        "id": 1000789
      },
      "writtenOn": "2022-05-24T15:40:04Z",
      "side": 1,
      "message": "This confused me quite a lot: Setting Qt::WA_NativeWindow means forcing platform-native widgets, which is the opposite of \"alien widgets\", and with this patch in place, it seems (at least at first glance) that Qt::WA_NativeWindow is only set for Wayland, but no other platforms (which IIUC is the opposite of what the commit msg says).\n\nActually, platform-native widgets are (at least currently) needed for Impress presentation mode to work, otherwise Impress crashes.\n\nI double-checked that no more setting Qt::WA_NativeWindow on Wayland still leads to a crash when pressing F5 in Impress.\n\nHowever, that is needed on X11 just the same, so I was wondering why it doesn\u0027t crash there with this patch in place.\n\nThe reason is that `windowHandle()` gets called in the QtFrame ctor before `FillSystemEnvData` gets called, so the\n\n    if (m_aSystemData.platform \u003d\u003d SystemEnvData::Platform::Wayland)\n    \ncheck in QtFrame::windowHandle incorrectly passes, and Qt::WA_NativeWindow still gets set on X11 as well.\n\nIf I drop\n\n    if (m_aSystemData.platform \u003d\u003d SystemEnvData::Platform::Wayland)\n        pChild-\u003esetAttribute(Qt::WA_NativeWindow);\n\nfrom QtFrame::windowHandle, the X11 case crashes just the same way, so this is apparently still needed on X11 as well.",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 33,
        "endChar": 35
      },
      "revId": "020d41d3c84fbf1bbf597ba9632c8dc57435826a",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "99400cbc_652e3d8d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000562
      },
      "writtenOn": "2022-05-24T11:11:14Z",
      "side": 1,
      "message": "After a lot of failed attempts, I tried this \"radical\" approach, and from all of my tests it seems to work fine. I still see some \"qt.qpa.xcb: QXcbConnection: XCB errors\"; not sure this is fixable or even needs fixes...",
      "revId": "020d41d3c84fbf1bbf597ba9632c8dc57435826a",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}