{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2a7b0760_a3b8a686",
        "filename": "sw/qa/uitest/writer_tests6/edit_file_properties_before_saving.py",
        "patchSetId": 5
      },
      "lineNbr": 91,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2022-02-17T12:54:54Z",
      "side": 1,
      "message": "Is there a race between saving the file with the code above and then opening it here?  At least \u003chttps://ci.libreoffice.org//job/lo_tb_master_linux_dbg/36725/\u003e was killed due to timeout, with UITest_writer_tests6 apparently deadlocked with the python.bin process on this line and the soffice.bin process showing an interaction dialog via UUIInteractionHelper::handleErrorHandlerRequest from (and notice rMessage\u003d\"an error occurred during file opening\" in frame #7)\n\n  #3  0x00002b39e4948bcb in UUIInteractionHelper::handleRequest(com::sun::star::uno::Reference\u003ccom::sun::star::task::XInteractionRequest\u003e const\u0026) (this\u003d0x381c040, rRequest\u003duno::Reference to (ucbhelper::SimpleIOErrorRequest *) 0x375ed08) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/uui/source/iahndl.cxx:169\n  #4  0x00002b39e498088e in (anonymous namespace)::UUIInteractionHandler::handle(com::sun::star::uno::Reference\u003ccom::sun::star::task::XInteractionRequest\u003e const\u0026) (this\u003d0x30dee40, rRequest\u003duno::Reference to (ucbhelper::SimpleIOErrorRequest *) 0x375ed08) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/uui/source/interactionhandler.cxx:196\n  #5  0x00002b39cafe6d65 in ucbhelper::InterceptedInteraction::impl_handleDefault(com::sun::star::uno::Reference\u003ccom::sun::star::task::XInteractionRequest\u003e const\u0026) (this\u003d0x38e53c0, xRequest\u003duno::Reference to (ucbhelper::SimpleIOErrorRequest *) 0x375ed08) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucbhelper/source/client/interceptedinteraction.cxx:78\n  #6  0x00002b39cafe6ce9 in ucbhelper::InterceptedInteraction::handle(com::sun::star::uno::Reference\u003ccom::sun::star::task::XInteractionRequest\u003e const\u0026) (this\u003d0x38e53c0, xRequest\u003duno::Reference to (ucbhelper::SimpleIOErrorRequest *) 0x375ed08) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucbhelper/source/client/interceptedinteraction.cxx:64\n  #7  0x00002b39caff80d3 in ucbhelper::cancelCommandExecution(com::sun::star::ucb::IOErrorCode, com::sun::star::uno::Sequence\u003ccom::sun::star::uno::Any\u003e const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::ucb::XCommandEnvironment\u003e const\u0026, rtl::OUString const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::ucb::XCommandProcessor\u003e const\u0026) (eError\u003dcom::sun::star::ucb::IOErrorCode_NOT_EXISTING, rArgs\u003duno::Sequence of length 2 \u003d {...}, xEnv\u003duno::Reference to (ucbhelper::CommandEnvironment *) 0x38e57a8, rMessage\u003d\"an error occurred during file opening\", xContext\u003duno::Reference to (fileaccess::BaseContent *) 0x386da38) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucbhelper/source/provider/cancelcommandexecution.cxx:92\n  #8  0x00002b39e404eb16 in fileaccess::throw_handler(int, int, com::sun::star::uno::Reference\u003ccom::sun::star::ucb::XCommandEnvironment\u003e const\u0026, rtl::OUString const\u0026, fileaccess::BaseContent*, bool) (errorCode\u003d12, minorCode\u003d2, xEnv\u003duno::Reference to (ucbhelper::CommandEnvironment *) 0x38e57a8, aUncPath\u003d\"file:///home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/tempdir/tmp7m3_475h/tdf119206-temp.odt\", pContent\u003d0x386da00, isHandled\u003dfalse) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucb/source/ucp/file/filglob.cxx:363\n  #9  0x00002b39e407cd16 in fileaccess::TaskManager::endTask(int, rtl::OUString const\u0026, fileaccess::BaseContent*) (this\u003d0x22b8c90, CommandId\u003d395, aUncPath\u003d\"file:///home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/tempdir/tmp7m3_475h/tdf119206-temp.odt\", pContent\u003d0x386da00) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucb/source/ucp/file/filtask.cxx:403\n  #10 0x00002b39e401c21f in fileaccess::BaseContent::endTask(int) (this\u003d0x386da00, CommandId\u003d395) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucb/source/ucp/file/bc.cxx:1131\n  #11 0x00002b39e40183af in fileaccess::BaseContent::execute(com::sun::star::ucb::Command const\u0026, int, com::sun::star::uno::Reference\u003ccom::sun::star::ucb::XCommandEnvironment\u003e const\u0026) (this\u003d0x386da00, aCommand\u003d..., CommandId\u003d395, Environment\u003duno::Reference to (ucbhelper::CommandEnvironment *) 0x38e57a8) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucb/source/ucp/file/bc.cxx:370\n  #12 0x00002b39cafdb656 in ucbhelper::Content_Impl::executeCommand(com::sun::star::ucb::Command const\u0026) (this\u003d0x381b5e0, rCommand\u003d...) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucbhelper/source/client/content.cxx:1255\n  #13 0x00002b39cafd7c2c in ucbhelper::Content::getPropertyValuesInterface(com::sun::star::uno::Sequence\u003crtl::OUString\u003e const\u0026) (this\u003d0x2b39e8a0c5b0, rPropertyNames\u003duno::Sequence of length 1 \u003d {...}) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucbhelper/source/client/content.cxx:496\n  #14 0x00002b39cafd798d in ucbhelper::Content::getPropertyValues(com::sun::star::uno::Sequence\u003crtl::OUString\u003e const\u0026) (this\u003d0x2b39e8a0c5b0, rPropertyNames\u003duno::Sequence of length 1 \u003d {...}) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucbhelper/source/client/content.cxx:455\n  #15 0x00002b39cafd771f in ucbhelper::Content::getPropertyValue(rtl::OUString const\u0026) (this\u003d0x2b39e8a0c5b0, rPropertyName\u003d\"IsDocument\") at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucbhelper/source/client/content.cxx:434\n  #16 0x00002b39cafda6bb in ucbhelper::Content::isDocument() (this\u003d0x2b39e8a0c5b0) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucbhelper/source/client/content.cxx:1026\n  #17 0x00002b39cafd8a9c in ucbhelper::Content::openStream() (this\u003d0x2b39e8a0c5b0) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/ucbhelper/source/client/content.cxx:689\n  #18 0x00002b39cb26629f in utl::MediaDescriptor::impl_openStreamWithURL(rtl::OUString const\u0026, bool) (this\u003d0x2b39e8a0cfe0, sURL\u003d\"file:///home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/tempdir/tmp7m3_475h/tdf119206-temp.odt\", bLockFile\u003dtrue) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/unotools/source/misc/mediadescriptor.cxx:469\n  #19 0x00002b39cb264d28 in utl::MediaDescriptor::impl_addInputStream(bool) (this\u003d0x2b39e8a0cfe0, bLockFile\u003dtrue) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/unotools/source/misc/mediadescriptor.cxx:260\n  #20 0x00002b39cb26491d in utl::MediaDescriptor::addInputStreamOwnLock() (this\u003d0x2b39e8a0cfe0) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/unotools/source/misc/mediadescriptor.cxx:229\n  #21 0x00002b39e5140181 in filter::config::TypeDetection::impl_openStream(utl::MediaDescriptor\u0026) (this\u003d0x3786ca0, rDescriptor\u003d...) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/filter/source/config/cache/typedetection.cxx:1114\n  #22 0x00002b39e513f97d in filter::config::TypeDetection::impl_askDetectService(rtl::OUString const\u0026, utl::MediaDescriptor\u0026) (this\u003d0x3786ca0, sDetectService\u003d\"com.sun.star.comp.filters.StorageFilterDetect\", rDescriptor\u003d...) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/filter/source/config/cache/typedetection.cxx:967\n  #23 0x00002b39e513f54a in filter::config::TypeDetection::impl_detectTypeFlatAndDeep(utl::MediaDescriptor\u0026, std::__debug::vector\u003cfilter::config::FlatDetectionInfo, std::allocator\u003cfilter::config::FlatDetectionInfo\u003e \u003e const\u0026, bool, rtl::OUString\u0026) (this\u003d0x3786ca0, rDescriptor\u003d..., lFlatTypes\u003dstd::__debug::vector of length 173, capacity 256 \u003d {...}, bAllowDeep\u003dtrue, rLastChance\u003d\"\") at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/filter/source/config/cache/typedetection.cxx:920\n  #24 0x00002b39e513c429 in filter::config::TypeDetection::queryTypeByDescriptor(com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e\u0026, unsigned char) (this\u003d0x3786ca0, lDescriptor\u003duno::Sequence of length 5 \u003d {...}, bAllowDeep\u003d1 \u0027\\001\u0027) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/filter/source/config/cache/typedetection.cxx:427\n  #25 0x00002b39c61812af in framework::LoadEnv::impl_detectTypeAndFilter() (this\u003d0x2b39e8a0d690) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/framework/source/loadenv/loadenv.cxx:758\n  #26 0x00002b39c617f5d9 in framework::LoadEnv::start() (this\u003d0x2b39e8a0d690) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/framework/source/loadenv/loadenv.cxx:378\n  #27 0x00002b39c617ec62 in framework::LoadEnv::startLoading(rtl::OUString const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::frame::XFrame\u003e const\u0026, rtl::OUString const\u0026, int, LoadEnvFeatures) (this\u003d0x2b39e8a0d690, sURL\u003d\"file:///home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/tempdir/tmp7m3_475h/tdf119206-temp.odt\", lMediaDescriptor\u003dempty uno::Sequence, xBaseFrame\u003duno::Reference to (framework::Desktop *) 0x2290b28, sTarget\u003d\"_default\", nSearchFlags\u003d0, eFeature\u003dWorkWithUI) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/framework/source/loadenv/loadenv.cxx:300\n  #28 0x00002b39c617d89b in framework::LoadEnv::loadComponentFromURL(com::sun::star::uno::Reference\u003ccom::sun::star::frame::XComponentLoader\u003e const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::uno::XComponentContext\u003e const\u0026, rtl::OUString const\u0026, rtl::OUString const\u0026, int, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) (xLoader\u003duno::Reference to (framework::Desktop *) 0x2290b38, xContext\u003dwarning: RTTI symbol not found for class \u0027cppu::(anonymous namespace)::ComponentContext\u0027\n  warning: RTTI symbol not found for class \u0027cppu::(anonymous namespace)::ComponentContext\u0027\n  uno::Reference to (com::sun::star::uno::XInterface *) 0x13ad7d0, sURL\u003d\"file:///home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/tempdir/tmp7m3_475h/tdf119206-temp.odt\", sTarget\u003d\"_default\", nSearchFlags\u003d0, lArgs\u003dempty uno::Sequence) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/framework/source/loadenv/loadenv.cxx:168\n  #29 0x00002b39c61a5876 in framework::Desktop::loadComponentFromURL(rtl::OUString const\u0026, rtl::OUString const\u0026, int, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) (this\u003d0x2290ac0, sURL\u003d\"file:///home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/tempdir/tmp7m3_475h/tdf119206-temp.odt\", sTargetFrameName\u003d\"_default\", nSearchFlags\u003d0, lArguments\u003dempty uno::Sequence) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/framework/source/services/desktop.cxx:594\n  #30 0x00002b39dbe73404 in gcc3::callVirtualMethod(void*, unsigned int, void*, _typelib_TypeDescriptionReference*, bool, unsigned long*, unsigned int, unsigned long*, double*) (pThis\u003d0x2290b38, nVtableIndex\u003d3, pRegisterReturn\u003d0x2b39e8a0dca0, pReturnTypeRef\u003d0x14e5830, bSimpleReturn\u003dfalse, pStack\u003d0x2b39e8a0dcc0, nStack\u003d0, pGPR\u003d0x2b39e8a0de50, pFPR\u003d0x2b39e8a0de80) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/bridges/source/cpp_uno/gcc3_linux_x86-64/callvirtualmethod.cxx:133\n  #31 0x00002b39dbe7204d in cpp_call(bridges::cpp_uno::shared::UnoInterfaceProxy*, bridges::cpp_uno::shared::VtableSlot, typelib_TypeDescriptionReference*, sal_Int32, typelib_MethodParameter*, void*, void**, uno_Any**) (pThis\u003d0x30dd9b0, aVtableSlot\u003d..., pReturnTypeRef\u003d0x14e5830, nParams\u003d4, pParams\u003d0x3660740, pUnoReturn\u003d0x391f9c0, pUnoArgs\u003d0x3118410, ppUnoExc\u003d0x2b39e8a0dff0) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/bridges/source/cpp_uno/gcc3_linux_x86-64/uno2cpp.cxx:233\n  #32 0x00002b39dbe72af8 in bridges::cpp_uno::shared::unoInterfaceProxyDispatch(uno_Interface*, typelib_TypeDescription const*, void*, void**, uno_Any**) (pUnoI\u003d0x30dd9b0, pMemberDescr\u003d0x3639b10, pReturn\u003d0x391f9c0, pArgs\u003d0x3118410, ppException\u003d0x2b39e8a0dff0) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/bridges/source/cpp_uno/gcc3_linux_x86-64/uno2cpp.cxx:413\n  #33 0x00002b39dc8ae4c6 in binaryurp::IncomingRequest::execute_throw(binaryurp::BinaryAny*, std::__debug::vector\u003cbinaryurp::BinaryAny, std::allocator\u003cbinaryurp::BinaryAny\u003e \u003e*) const (this\u003d0x24027f0, returnValue\u003d0x2b39e8a0e3a0, outArguments\u003d0x2b39e8a0e440) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/binaryurp/source/incomingrequest.cxx:235\n  #34 0x00002b39dc8ad164 in binaryurp::IncomingRequest::execute() const (this\u003d0x24027f0) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/binaryurp/source/incomingrequest.cxx:78\n  #35 0x00002b39dc8d11f7 in binaryurp::(anonymous namespace)::request(void*) (pThreadSpecificData\u003d0x24027f0) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/binaryurp/source/reader.cxx:85\n  #36 0x00002b39c5555f29 in cppu_threadpool::JobQueue::enter(void const*, bool) (this\u003d0x386cb50, nDisposeId\u003d0x27db7c0, bReturnWhenNoJob\u003dtrue) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/cppu/source/threadpool/jobqueue.cxx:100\n  #37 0x00002b39c555bd6b in cppu_threadpool::ORequestThread::run() (this\u003d0x27db7c0) at /home/tdf/lode/jenkins/workspace/lo_tb_master_linux_dbg/cppu/source/threadpool/thread.cxx:164",
      "revId": "01cbdcc6dd0cf575997e9899496115ac41ab4be1",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17b20cc1_2a1dbf9b",
        "filename": "sw/qa/uitest/writer_tests6/edit_file_properties_before_saving.py",
        "patchSetId": 5
      },
      "lineNbr": 91,
      "author": {
        "id": 1000179
      },
      "writtenOn": "2022-02-24T10:32:47Z",
      "side": 1,
      "message": "I believe https://gerrit.libreoffice.org/c/core/+/130491 should fix it",
      "parentUuid": "2a7b0760_a3b8a686",
      "revId": "01cbdcc6dd0cf575997e9899496115ac41ab4be1",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "44e9a8c7_edbe8787",
        "filename": "sw/qa/uitest/writer_tests6/edit_file_properties_before_saving.py",
        "patchSetId": 5
      },
      "lineNbr": 91,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2022-02-24T10:39:55Z",
      "side": 1,
      "message": "but also note what I wrote on #libreoffice-dev earlier today: \"\u003chttps://ci.libreoffice.org//job/lo_tb_master_linux_dbg/36848/\u003e now failed similarly at sw/qa/uitest/writer_tests6/save_readonly_with_password.py:50, so there might be an issue with the pattern of saving a file though a Save dialog and then immediately opening it with load_file, without some intermediate waiting/process-to-idle...\"",
      "parentUuid": "17b20cc1_2a1dbf9b",
      "revId": "01cbdcc6dd0cf575997e9899496115ac41ab4be1",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17df8957_e2bc0ef5",
        "filename": "sw/qa/uitest/writer_tests6/edit_file_properties_before_saving.py",
        "patchSetId": 5
      },
      "lineNbr": 91,
      "author": {
        "id": 1000179
      },
      "writtenOn": "2022-02-24T10:51:35Z",
      "side": 1,
      "message": "ok, will add this wait to every test then, just to be sure",
      "parentUuid": "44e9a8c7_edbe8787",
      "revId": "01cbdcc6dd0cf575997e9899496115ac41ab4be1",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4cfc8e43_accd56f1",
        "filename": "sw/qa/uitest/writer_tests6/edit_file_properties_before_saving.py",
        "patchSetId": 5
      },
      "lineNbr": 91,
      "author": {
        "id": 1000179
      },
      "writtenOn": "2022-02-25T12:31:25Z",
      "side": 1,
      "message": "Now patch in https://gerrit.libreoffice.org/c/core/+/130530/1",
      "parentUuid": "17df8957_e2bc0ef5",
      "revId": "01cbdcc6dd0cf575997e9899496115ac41ab4be1",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}