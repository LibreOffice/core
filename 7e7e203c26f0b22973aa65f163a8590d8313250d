{
  "comments": [
    {
      "key": {
        "uuid": "9c1dadd9_b2a6b77a",
        "filename": "sc/qa/uitest/range_name/tdf119954.py",
        "patchSetId": 6
      },
      "lineNbr": 66,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2020-11-04T12:23:36Z",
      "side": 1,
      "message": "I just saw this deadlock now with recent master on Linux:  While the Python process is waiting in close_dialog_through_button here, the soffice.bin process\u0027s main thread is stuck because it displays an \"Invalid range\" ERRORBOX from within ScDbNameDlg::OkBtnHdl:\n\n  #10 0x00007f2df10213d4 in Application::Yield() () at ~/lo/core/vcl/source/app/svapp.cxx:510\n  #11 0x00007f2df0617d7b in Dialog::Execute() (this\u003d0x399c8d0) at ~/lo/core/vcl/source/window/dialog.cxx:1030\n  #12 0x00007f2df0f60ace in SalInstanceDialog::run() (this\u003d0x6a78620) at ~/lo/core/vcl/source/app/salvtables.cxx:1545\n  #13 0x00007f2dbb3e73cc in (anonymous namespace)::ERRORBOX(weld::Window*, rtl::OUString const\u0026) (pParent\u003d0x7f2db4968d80, rString\u003d\"Invalid range\") at ~/lo/core/sc/source/ui/dbgui/dbnamdlg.cxx:54\n  #14 0x00007f2dbb3e70f7 in ScDbNameDlg::AddBtnHdl(weld::Button\u0026) (this\u003d0x7f2db4b7f550) at ~/lo/core/sc/source/ui/dbgui/dbnamdlg.cxx:468\n  #15 0x00007f2dbb3e62a3 in ScDbNameDlg::OkBtnHdl(weld::Button\u0026) (this\u003d0x7f2db4b7f550) at ~/lo/core/sc/source/ui/dbgui/dbnamdlg.cxx:379\n  #16 0x00007f2dbb3e4b08 in ScDbNameDlg::LinkStubOkBtnHdl(void*, weld::Button\u0026) (instance\u003d0x7f2db4b7f550, data\u003d...) at ~/lo/core/sc/source/ui/dbgui/dbnamdlg.cxx:377\n  #17 0x00007f2df0fa5018 in Link\u003cweld::Button\u0026, void\u003e::Call(weld::Button\u0026) const (this\u003d0x7f2dc00109a8, data\u003d...) at ~/lo/core/include/tools/link.hxx:111\n  #18 0x00007f2df0f90137 in weld::Button::signal_clicked() (this\u003d0x7f2dc00109a0) at ~/lo/core/include/vcl/weld.hxx:1271\n  #19 0x00007f2df0f6473a in SalInstanceButton::ClickHdl(Button*) (this\u003d0x7f2dc00107c0, pButton\u003d0x7f2db4d57c30) at ~/lo/core/vcl/source/app/salvtables.cxx:2503\n  #20 0x00007f2df0f63c38 in SalInstanceButton::LinkStubClickHdl(void*, Button*) (instance\u003d0x7f2dc00107c0, data\u003d0x7f2db4d57c30) at ~/lo/core/vcl/source/app/salvtables.cxx:2491\n  #21 0x00007f2df08115b8 in Link\u003cButton*, void\u003e::Call(Button*) const (this\u003d0x7f2db4d57eb0, data\u003d0x7f2db4d57c30) at ~/lo/core/include/tools/link.hxx:111\n  #22 0x00007f2df080c52c in Button::Click()::$_0::operator()() const (this\u003d0x7ffc0a7e7448) at ~/lo/core/vcl/source/control/button.cxx:124\n  #23 0x00007f2df080c3cd in std::_Function_handler\u003cvoid (), Button::Click()::$_0\u003e::_M_invoke(std::_Any_data const\u0026) (__functor\u003d...) at ~/gcc/inst/include/c++/7.3.0/bits/std_function.h:316\n  #24 0x00007f2df083a79e in std::function\u003cvoid ()\u003e::operator()() const (this\u003d0x7ffc0a7e7448) at ~/gcc/inst/include/c++/7.1.1/bits/std_function.h:706\n  #25 0x00007f2df083841b in Control::ImplCallEventListenersAndHandler(VclEventId, std::function\u003cvoid ()\u003e const\u0026) (this\u003d0x7f2db4d57c30, nEvent\u003dVclEventId::ButtonClick, callHandler\u003d...) at ~/lo/core/vcl/source/control/ctrl.cxx:315\n  #26 0x00007f2df07f6628 in Button::Click() (this\u003d0x7f2db4d57c30) at ~/lo/core/vcl/source/control/button.cxx:124\n  #27 0x00007f2df11cfe7b in ButtonUIObject::execute(rtl::OUString const\u0026, std::__debug::map\u003crtl::OUString const, rtl::OUString, std::less\u003crtl::OUString const\u003e, std::allocator\u003cstd::pair\u003crtl::OUString const, rtl::OUString\u003e \u003e \u003e const\u0026) (this\u003d0x7f2dc0010d30, rAction\u003d\"CLICK\", rParameters\u003dstd::__debug::map with 0 elements) at ~/lo/core/vcl/source/uitest/uiobject.cxx:614\n  #28 0x00007f2df11ea827 in UIObjectUnoObj::executeAction(rtl::OUString const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026)::$_0::operator()() const (this\u003d0x7f2de01df640) at ~/lo/core/vcl/source/uitest/uno/uiobject_uno.cxx:124\n  #29 0x00007f2df11ea4ed in std::_Function_handler\u003cvoid (), UIObjectUnoObj::executeAction(rtl::OUString const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026)::$_0\u003e::_M_invoke(std::_Any_data const\u0026) (__functor\u003d...) at ~/gcc/inst/include/c++/7.3.0/bits/std_function.h:316\n  #30 0x00007f2df083a79e in std::function\u003cvoid ()\u003e::operator()() const (this\u003d0x7f2de01df640) at ~/gcc/inst/include/c++/7.1.1/bits/std_function.h:706\n  #31 0x00007f2df11ea294 in (anonymous namespace)::ExecuteWrapper::ExecuteActionHdl(Timer*) (this\u003d0x7f2de01df640) at ~/lo/core/vcl/source/uitest/uno/uiobject_uno.cxx:83\n  #32 0x00007f2df11e9648 in (anonymous namespace)::ExecuteWrapper::LinkStubExecuteActionHdl(void*, Timer*) (instance\u003d0x7f2de01df640, data\u003d0x7f2de005d090) at ~/lo/core/vcl/source/uitest/uno/uiobject_uno.cxx:78\n  #33 0x00007f2df1049a48 in Link\u003cTimer*, void\u003e::Call(Timer*) const (this\u003d0x7f2de005d0b0, data\u003d0x7f2de005d090) at ~/lo/core/include/tools/link.hxx:111\n  #34 0x00007f2df1049887 in Timer::Invoke() (this\u003d0x7f2de005d090) at ~/lo/core/vcl/source/app/timer.cxx:75\n  #35 0x00007f2df0feacd1 in Scheduler::ProcessTaskScheduling() () at ~/lo/core/vcl/source/app/scheduler.cxx:486\n  #36 0x00007f2df0fe971d in Scheduler::CallbackTaskScheduling() () at ~/lo/core/vcl/source/app/scheduler.cxx:288\n  #37 0x00007f2df12c7e06 in SalTimer::CallCallback() (this\u003d0x3476870) at ~/lo/core/vcl/inc/saltimer.hxx:54\n  #38 0x00007f2df12c5ea3 in SvpSalInstance::CheckTimeout(bool) (this\u003d0x1db9980, bExecuteTimers\u003dtrue) at ~/lo/core/vcl/headless/svpinst.cxx:210\n  #39 0x00007f2df12c6ec0 in SvpSalInstance::DoYield(bool, bool) (this\u003d0x1db9980, bWait\u003dtrue, bHandleAllCurrentEvents\u003dfalse) at ~/lo/core/vcl/headless/svpinst.cxx:463\n  #40 0x00007f2df1021772 in ImplYield(bool, bool) (i_bWait\u003dtrue, i_bAllEvents\u003dfalse) at ~/lo/core/vcl/source/app/svapp.cxx:446\n  #41 0x00007f2df10213d4 in Application::Yield() () at ~/lo/core/vcl/source/app/svapp.cxx:510\n  #42 0x00007f2df1021350 in Application::Execute() () at ~/lo/core/vcl/source/app/svapp.cxx:425\n  #43 0x00007f2df84df2ad in desktop::Desktop::Main() (this\u003d0x7ffc0a7eaee8) at ~/lo/core/desktop/source/app/app.cxx:1588\n  #44 0x00007f2df1044879 in ImplSVMain() () at ~/lo/core/vcl/source/app/svmain.cxx:196\n  #45 0x00007f2df10465d9 in SVMain() () at ~/lo/core/vcl/source/app/svmain.cxx:228\n  #46 0x00007f2df8557445 in soffice_main() () at ~/lo/core/desktop/source/app/sofficemain.cxx:98\n  #47 0x000000000020197d in sal_main () at ~/lo/core/desktop/source/app/main.c:48\n  #48 0x0000000000201957 in main (argc\u003d7, argv\u003d0x7ffc0a7eb0c8) at ~/lo/core/desktop/source/app/main.c:47\n\nIn ScDbNameDlg::AddBtnHdl (frame #14), aNewName is \"bbb\" and aText is \"$Sheet2.$C$3\" and\n\n  if ( aTmpRange.ParseAny( aText, rDoc, aAddrDetails ) \u0026 ScRefFlags::VALID )\n\napparently failed (aTmpRange is\n\n  $3 \u003d {\n    aStart \u003d {\n      nRow \u003d 0,\n      nCol \u003d 0,\n      nTab \u003d 0,\n      static detailsOOOa1 \u003d {\n        eConv \u003d formula::FormulaGrammar::CONV_OOO,\n        nRow \u003d 0,\n        nCol \u003d 0\n      }\n    },\n    aEnd \u003d {\n      nRow \u003d 0,\n      nCol \u003d 0,\n      nTab \u003d 0,\n      static detailsOOOa1 \u003d {\n        eConv \u003d formula::FormulaGrammar::CONV_OOO,\n        nRow \u003d 0,\n        nCol \u003d 0\n      }\n    }\n  }\n\n).",
      "range": {
        "startLine": 66,
        "startChar": 8,
        "endLine": 66,
        "endChar": 56
      },
      "revId": "7e7e203c26f0b22973aa65f163a8590d8313250d",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": true
    }
  ]
}