{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "cb0fc492_37f6dc8e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1002210
      },
      "writtenOn": "2021-12-06T10:28:49Z",
      "side": 1,
      "message": "Hi. It seems to me the problem might be the following:\nWhen the test selects/gets a shape with the getShape(int nShapeNum) method, unfortunately in the different platforms the 2nd shape for example can be different. (I do not understand why, but it seems this causes the problem, see https://gerrit.libreoffice.org/c/core/+/126052 ) In addition, if the test modifies the shape (for example grouping like in this case) the order also can be changed. So now, i think there must be a search method to find that shape what have to be tested, but i have no idea what should be the key for find method... so i think you\u0027re right this is quite fishy... But, if i have a good idea and it works with https://gerrit.libreoffice.org/c/core/+/126052 then i will do the same with this tests too (if you do not mind).",
      "revId": "3a48a1cad8bebe7fe774a9beab324d48c689f890",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ce63f2fb_0dda76ac",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1002210
      },
      "writtenOn": "2021-12-07T12:27:10Z",
      "side": 1,
      "message": "Hi Xisco,\nSo, i have debugged the test with VS and i found the following:\nI have tried many variations, testing with different selecting methods with various shells (I think the drawsh is the most acceptable for in this case) but the simplest and the best is this version (yes, the original one :) ), because all of them works, not the really same but can do the rest. I think there is no problem at all with the test, however there are strange problems with the command dispatcher: In the first case (patch-set #1 ) if i remember well, on Jenkins, there was an assert because selection was bad. (suspicious, there the dispatcher has the problem too.) But in the other cases the main problem, that assert where the textbox state is checked. So, when i debugged the test there were everything right until the line \".uno:AddTextBox\" dispatcher call reached.  There behind the dispatcher call after about 4 step in the call stack when the command parsed there is a slotId ( like there https://wiki.documentfoundation.org/Development/DispatchCommands ) what is the equivalent of the TextBoxAdding call. And, there is a method which should find the shell and the function what have to be executed with this slot. In this method there is a list/stack i don\u0027t remember well, but never mind in this case i think, so there is a container with the running shells. But, by a mysterious reason the draw-shell does not be there always, i do not know what it depends but sometimes it missing. Maybe due to this, the method gives back nothing (could not find the shell and the execution method), and the command ignored, and that leads to fail. So i think -- to summarise it -- we should keep the python version of this test, or we have to bypass the dispatcher i this case and call the functions directly... Or, i have no idea what determinates the dispatcher to be able to find the needed method (in this case SwTextBoxHelper::create in the drawsh) Sorry for writing so long... :)\nWhat is your opinion?\n ",
      "revId": "3a48a1cad8bebe7fe774a9beab324d48c689f890",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bed2e08f_3dd869fd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1002210
      },
      "writtenOn": "2021-12-07T12:33:24Z",
      "side": 1,
      "message": "I told about this function: https://opengrok.libreoffice.org/xref/core/sfx2/source/control/dispatch.cxx?r\u003dce22935a#695",
      "parentUuid": "ce63f2fb_0dda76ac",
      "revId": "3a48a1cad8bebe7fe774a9beab324d48c689f890",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "26cd9e9c_03599bbe",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1001002
      },
      "writtenOn": "2021-12-09T12:30:05Z",
      "side": 1,
      "message": "Attila: there is a getShapeByName() helper function to choose the right shape by its name (see and modify shape names in Navigator).",
      "parentUuid": "cb0fc492_37f6dc8e",
      "revId": "3a48a1cad8bebe7fe774a9beab324d48c689f890",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "569b426c_4947387d",
        "filename": "sw/qa/extras/uiwriter/uiwriter3.cxx",
        "patchSetId": 4
      },
      "lineNbr": 1210,
      "author": {
        "id": 1002210
      },
      "writtenOn": "2021-12-06T12:49:56Z",
      "side": 1,
      "message": "In this case, according to the log, on that two platform, the test failed here. For some misty reason the selection is unsuccessful. maybe if the selection is made by the SwFEShell::SelectObj(SdrObj*) that might be work. If you don\u0027t mind i give it a try. :)",
      "range": {
        "startLine": 1210,
        "startChar": 4,
        "endLine": 1210,
        "endChar": 75
      },
      "revId": "3a48a1cad8bebe7fe774a9beab324d48c689f890",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4e75b2b_1734f9e4",
        "filename": "sw/qa/extras/uiwriter/uiwriter3.cxx",
        "patchSetId": 4
      },
      "lineNbr": 1210,
      "author": {
        "id": 1002210
      },
      "writtenOn": "2021-12-07T12:27:10Z",
      "side": 1,
      "message": "Update: forget about this. I am afraid i find the main problem...",
      "parentUuid": "569b426c_4947387d",
      "range": {
        "startLine": 1210,
        "startChar": 4,
        "endLine": 1210,
        "endChar": 75
      },
      "revId": "3a48a1cad8bebe7fe774a9beab324d48c689f890",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d85b828f_4b9d214a",
        "filename": "sw/qa/extras/uiwriter/uiwriter3.cxx",
        "patchSetId": 4
      },
      "lineNbr": 1210,
      "author": {
        "id": 1000179
      },
      "writtenOn": "2021-12-09T16:32:03Z",
      "side": 1,
      "message": "Hello Attila,\nThe new code uses SelectObj and no getShapes at all, it still fails in\n\nCPPUNIT_ASSERT_EQUAL(true, xShapeProps-\u003egetPropertyValue(\"TextBox\").get\u003cbool\u003e());\nSo I really believe the problem is in .uno:AddTextBox",
      "parentUuid": "a4e75b2b_1734f9e4",
      "range": {
        "startLine": 1210,
        "startChar": 4,
        "endLine": 1210,
        "endChar": 75
      },
      "revId": "3a48a1cad8bebe7fe774a9beab324d48c689f890",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}