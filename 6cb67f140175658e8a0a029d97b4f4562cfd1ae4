{
  "comments": [
    {
      "key": {
        "uuid": "ae10559a_b5eb8384",
        "filename": "bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx",
        "patchSetId": 2
      },
      "lineNbr": 334,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2020-06-18T07:15:21Z",
      "side": 1,
      "message": "What is the reason for this change?",
      "revId": "6cb67f140175658e8a0a029d97b4f4562cfd1ae4",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5977e133_581c016f",
        "filename": "bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx",
        "patchSetId": 2
      },
      "lineNbr": 334,
      "author": {
        "id": 1002567
      },
      "writtenOn": "2020-06-18T08:28:43Z",
      "side": 1,
      "message": "register asm is a gcc\u0027ism and it\u0027s not supported by clang. It results in a crash on FreeBSD.\nThe asm should probably be:\n    asm volatile(\n        \"mov %0, x8\\n\"\n        \"mov %1, x9\\n\"\n        \"mov %2, x10\\n\"\n        : \"\u003dr\" (indirectRet), \"\u003dr\" (functionIndex), \"\u003dr\" (vtableOffset)\n        ::);",
      "parentUuid": "ae10559a_b5eb8384",
      "revId": "6cb67f140175658e8a0a029d97b4f4562cfd1ae4",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07b96ef2_fcff7800",
        "filename": "bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx",
        "patchSetId": 2
      },
      "lineNbr": 334,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2020-06-18T08:53:59Z",
      "side": 1,
      "message": "\u003e register asm is a gcc\u0027ism and it\u0027s not supported by clang.\n\nClang should support that since \u003chttps://github.com/llvm/llvm-project/commit/c56f847a965ce547b82b1d4471b41d808f80cd4b\u003e \"Add support for declaring register contraints in variables [...]\" from 2010, probably available since Clang 2.9 (so clearly predating our Clang 5.0.2 baseline)?\n\n\u003e It results in a crash on FreeBSD.\n\nWhat kind of crash would that be?",
      "parentUuid": "5977e133_581c016f",
      "revId": "6cb67f140175658e8a0a029d97b4f4562cfd1ae4",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c9ea8d11_8aca55f6",
        "filename": "bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx",
        "patchSetId": 2
      },
      "lineNbr": 334,
      "author": {
        "id": 1002567
      },
      "writtenOn": "2020-07-25T06:45:43Z",
      "side": 1,
      "message": "Here are the warnings printed by clang:\n\n/usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx:349:9: warning: variable \u0027functionIndex\u0027 is uninitialized when used here [-Wuninitialized]\n        functionIndex, vtableOffset, gpr,\n        ^~~~~~~~~~~~~\n/usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx:325:46: note: initialize the variable \u0027functionIndex\u0027 to silence this warning\n    register sal_Int32 volatile functionIndex asm (\"x9\");\n                                             ^\n                                              \u003d 0\n/usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx:349:24: warning: variable \u0027vtableOffset\u0027 is uninitialized when used here [-Wuninitialized]\n        functionIndex, vtableOffset, gpr,\n                       ^~~~~~~~~~~~\n/usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx:326:45: note: initialize the variable \u0027vtableOffset\u0027 to silence this warning\n    register sal_Int32 volatile vtableOffset asm (\"x10\");\n                                            ^\n                                             \u003d 0\n/usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx:353:9: warning: variable \u0027indirectRet\u0027 is uninitialized when used here [-Wuninitialized]\n        indirectRet);\n        ^~~~~~~~~~~\n/usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx:324:41: note: initialize the variable \u0027indirectRet\u0027 to silence this warning\n    register void * volatile indirectRet asm (\"x8\");\n                                        ^\n                                         \u003d nullptr\n\n\nThe crash:\n\nWork on gallery \u0027file:///usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/workdir/Gallery\n/computers\u0027                                                                                   \nExisting themes: 0                                                                                                                                                                           \nSegmentation fault (core dumped)\n\n\nthe backtrace:\n\n#0  0x000000004737fa98 in vtableCall () from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libgcc3_uno.so\n#1  0x00000000473803bc in vtableSlotCall () from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libgcc3_uno.so\n#2  0x00000000412f51d0 in cppu::throwException(com::sun::star::uno::Any const\u0026) () from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libuno_cppuhelpergcc3.so.3\n#3  0x0000000043c13940 in ucbhelper::cancelCommandExecution(com::sun::star::ucb::IOErrorCode, com::sun::star::uno::Sequence\u003ccom::sun::star::uno::Any\u003e const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::ucb::XCommandEnvironment\u003e const\u0026, rtl::OUString const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::ucb::XCommandProcessor\u003e const\u0026) ()\n   from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libucbhelper.so\n#4  0x00000000490cdf80 in fileaccess::throw_handler(int, int, com::sun::star::uno::Reference\u003ccom::sun::star::ucb::XCommandEnvironment\u003e const\u0026, rtl::OUString const\u0026, fileaccess::BaseContent*, bool) () from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/../program/libucpfile1.so\n#5  0x00000000490e7294 in fileaccess::TaskManager::endTask(int, rtl::OUString const\u0026, fileaccess::BaseContent*) ()\n   from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/../program/libucpfile1.so\n#6  0x00000000490c4490 in fileaccess::BaseContent::execute(com::sun::star::ucb::Command const\u0026, int, com::sun::star::uno::Reference\u003ccom::sun::star::ucb::XCommandEnvironment\u003e const\u0026) ()\n   from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/../program/libucpfile1.so\n#7  0x0000000043c03048 in ucbhelper::Content_Impl::executeCommand(com::sun::star::ucb::Command const\u0026) ()\n   from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libucbhelper.so\n#8  0x0000000043c04424 in ucbhelper::Content::getPropertyValuesInterface(com::sun::star::uno::Sequence\u003crtl::OUString\u003e const\u0026) ()\n   from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libucbhelper.so\n#9  0x0000000043c0350c in ucbhelper::Content::getPropertyValues(com::sun::star::uno::Sequence\u003crtl::OUString\u003e const\u0026) ()\n   from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libucbhelper.so\n#10 0x0000000043c03344 in ucbhelper::Content::getPropertyValue(rtl::OUString const\u0026) () from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libucbhelper.so\n#11 0x0000000042632530 in FileExists(INetURLObject const\u0026) () from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libsvxcorelo.so\n#12 0x000000004262e5c4 in GalleryThemeEntry::ImplGetURLIgnoreCase(INetURLObject const\u0026) () from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libsvxcorelo.so\n#13 0x000000004262de48 in GalleryThemeEntry::GalleryThemeEntry(bool, INetURLObject const\u0026, rtl::OUString const\u0026, bool, bool, unsigned int, bool) ()\n   from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libsvxcorelo.so\n#14 0x0000000042630670 in Gallery::CreateTheme(rtl::OUString const\u0026) () from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libsvxcorelo.so\n#15 0x00000000002153fc in GalApp::Main() ()\n#16 0x0000000041df79b8 in ImplSVMain() () from /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/instdir/program/libvcllo.so\n#17 0x0000000000217dbc in main ()",
      "parentUuid": "07b96ef2_fcff7800",
      "revId": "6cb67f140175658e8a0a029d97b4f4562cfd1ae4",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a046d76f_85d77a65",
        "filename": "bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx",
        "patchSetId": 2
      },
      "lineNbr": 334,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2020-07-27T08:00:06Z",
      "side": 1,
      "message": "\u003e Here are the warnings printed by clang:\n\u003e \n\u003e /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx:349:9: warning: variable \u0027functionIndex\u0027 is uninitialized when used here [-Wuninitialized]\n\u003e         functionIndex, vtableOffset, gpr,\n\u003e         ^~~~~~~~~~~~~\n\u003e /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx:325:46: note: initialize the variable \u0027functionIndex\u0027 to silence this warning\n\u003e     register sal_Int32 volatile functionIndex asm (\"x9\");\n\u003e                                              ^\n\u003e                                               \u003d 0\n\u003e /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx:349:24: warning: variable \u0027vtableOffset\u0027 is uninitialized when used here [-Wuninitialized]\n\u003e         functionIndex, vtableOffset, gpr,\n\u003e                        ^~~~~~~~~~~~\n\u003e /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx:326:45: note: initialize the variable \u0027vtableOffset\u0027 to silence this warning\n\u003e     register sal_Int32 volatile vtableOffset asm (\"x10\");\n\u003e                                             ^\n\u003e                                              \u003d 0\n\u003e /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx:353:9: warning: variable \u0027indirectRet\u0027 is uninitialized when used here [-Wuninitialized]\n\u003e         indirectRet);\n\u003e         ^~~~~~~~~~~\n\u003e /usr/ports/editors/libreoffice/work/libreoffice-6.4.4.2/bridges/source/cpp_uno/gcc3_linux_aarch64/cpp2uno.cxx:324:41: note: initialize the variable \u0027indirectRet\u0027 to silence this warning\n\u003e     register void * volatile indirectRet asm (\"x8\");\n\u003e                                         ^\n\u003e                                          \u003d nullptr\n\nDo you build with \u003chttps://git.libreoffice.org/core/+/23b384ee3b0ecde3e30dfd8c4fcb13aab9e65c04%5E!/\u003e \"Silence -Werror,-Wuninitialized\" included?  (Asking because your mention of \"libreoffice-6.4.4.2\" and the specific line numbers above make it look like you likely don\u0027t.)",
      "parentUuid": "c9ea8d11_8aca55f6",
      "revId": "6cb67f140175658e8a0a029d97b4f4562cfd1ae4",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": true
    }
  ]
}