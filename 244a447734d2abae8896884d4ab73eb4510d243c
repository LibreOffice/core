{
  "comments": [
    {
      "key": {
        "uuid": "655ddd6e_9fef2b45",
        "filename": "sc/source/ui/view/cellsh1.cxx",
        "patchSetId": 3
      },
      "lineNbr": 3014,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2020-11-30T20:37:03Z",
      "side": 1,
      "message": "The lambda now uses the \u0026-captured outer aDestPos after it has gone out of scope, e.g. during UITest_calc_tests8:\n\n  \u003d\u003d1217030\u003d\u003dERROR: AddressSanitizer: stack-use-after-return on address 0x7f06d7133444 at pc 0x7f069f0cb613 bp 0x7ffe24058430 sp 0x7ffe24058428\n  WRITE of size 2 at 0x7f06d7133444 thread T0\n   #0 in ScAddress::operator\u003d(ScAddress const\u0026) at sc/inc/address.hxx:415:10\n   #1 in ScCellShell::ExecuteDataPilotDialog()::$_4::operator()(int) const at sc/source/ui/view/cellsh1.cxx:3014:42\n   #2 in void std::__invoke_impl\u003cvoid, ScCellShell::ExecuteDataPilotDialog()::$_4\u0026, int\u003e(std::__invoke_other, ScCellShell::ExecuteDataPilotDialog()::$_4\u0026, int\u0026\u0026) at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/11.0.0/../../../../include/c++/11.0.0/bits/invoke.h:60:14\n   #3 in std::enable_if\u003cis_invocable_r_v\u003cvoid, ScCellShell::ExecuteDataPilotDialog()::$_4\u0026, int\u003e, void\u003e::type std::__invoke_r\u003cvoid, ScCellShell::ExecuteDataPilotDialog()::$_4\u0026, int\u003e(ScCellShell::ExecuteDataPilotDialog()::$_4\u0026, int\u0026\u0026) at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/11.0.0/../../../../include/c++/11.0.0/bits/invoke.h:110:2\n   #4 in std::_Function_handler\u003cvoid (int), ScCellShell::ExecuteDataPilotDialog()::$_4\u003e::_M_invoke(std::_Any_data const\u0026, int\u0026\u0026) at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/11.0.0/../../../../include/c++/11.0.0/bits/std_function.h:291:9\n   #5 in std::function\u003cvoid (int)\u003e::operator()(int) const at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/11.0.0/../../../../include/c++/11.0.0/bits/std_function.h:560:9\n   #6 in Dialog::EndDialog(long) at vcl/source/window/dialog.cxx:1137:9\n   #7 in Dialog::ResponseHdl(Button*) at vcl/source/window/dialog.cxx:1391:5\n   #8 in Dialog::LinkStubResponseHdl(void*, Button*) at vcl/source/window/dialog.cxx:1376:1\n   #9 in Link\u003cButton*, void\u003e::Call(Button*) const at include/tools/link.hxx:111:45\n   #10 in Button::Click()::$_0::operator()() const at vcl/source/control/button.cxx:124:87\n   #11 in void std::__invoke_impl\u003cvoid, Button::Click()::$_0\u0026\u003e(std::__invoke_other, Button::Click()::$_0\u0026) at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/11.0.0/../../../../include/c++/11.0.0/bits/invoke.h:60:14\n   #12 in std::enable_if\u003cis_invocable_r_v\u003cvoid, Button::Click()::$_0\u0026\u003e, void\u003e::type std::__invoke_r\u003cvoid, Button::Click()::$_0\u0026\u003e(Button::Click()::$_0\u0026) at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/11.0.0/../../../../include/c++/11.0.0/bits/invoke.h:110:2\n   #13 in std::_Function_handler\u003cvoid (), Button::Click()::$_0\u003e::_M_invoke(std::_Any_data const\u0026) at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/11.0.0/../../../../include/c++/11.0.0/bits/std_function.h:291:9\n   #14 in std::function\u003cvoid ()\u003e::operator()() const at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/11.0.0/../../../../include/c++/11.0.0/bits/std_function.h:560:9\n   #15 in Control::ImplCallEventListenersAndHandler(VclEventId, std::function\u003cvoid ()\u003e const\u0026) at vcl/source/control/ctrl.cxx:315:13\n   #16 in Button::Click() at vcl/source/control/button.cxx:124:5\n   #17 in ButtonUIObject::execute(rtl::OUString const\u0026, std::__debug::map\u003crtl::OUString const, rtl::OUString, std::less\u003crtl::OUString const\u003e, std::allocator\u003cstd::pair\u003crtl::OUString const, rtl::OUString\u003e \u003e \u003e const\u0026) at vcl/source/uitest/uiobject.cxx:614:19\n   #18 in UIObjectUnoObj::executeAction(rtl::OUString const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026)::$_0::operator()() const at vcl/source/uitest/uno/uiobject_uno.cxx:124:16\n   #19 in void std::__invoke_impl\u003cvoid, UIObjectUnoObj::executeAction(rtl::OUString const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026)::$_0\u0026\u003e(std::__invoke_other, UIObjectUnoObj::executeAction(rtl::OUString const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026)::$_0\u0026) at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/11.0.0/../../../../include/c++/11.0.0/bits/invoke.h:60:14\n   #20 in std::enable_if\u003cis_invocable_r_v\u003cvoid, UIObjectUnoObj::executeAction(rtl::OUString const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026)::$_0\u0026\u003e, void\u003e::type std::__invoke_r\u003cvoid, UIObjectUnoObj::executeAction(rtl::OUString const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026)::$_0\u0026\u003e(UIObjectUnoObj::executeAction(rtl::OUString const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026)::$_0\u0026) at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/11.0.0/../../../../include/c++/11.0.0/bits/invoke.h:110:2\n   #21 in std::_Function_handler\u003cvoid (), UIObjectUnoObj::executeAction(rtl::OUString const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026)::$_0\u003e::_M_invoke(std::_Any_data const\u0026) at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/11.0.0/../../../../include/c++/11.0.0/bits/std_function.h:291:9\n   #22 in std::function\u003cvoid ()\u003e::operator()() const at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/11.0.0/../../../../include/c++/11.0.0/bits/std_function.h:560:9\n   #23 in (anonymous namespace)::ExecuteWrapper::ExecuteActionHdl(Timer*) at vcl/source/uitest/uno/uiobject_uno.cxx:83:13\n   #24 in (anonymous namespace)::ExecuteWrapper::LinkStubExecuteActionHdl(void*, Timer*) at vcl/source/uitest/uno/uiobject_uno.cxx:78:1\n   #25 in Link\u003cTimer*, void\u003e::Call(Timer*) const at include/tools/link.hxx:111:45\n   #26 in Timer::Invoke() at vcl/source/app/timer.cxx:75:21\n   #27 in Scheduler::ProcessTaskScheduling() at vcl/source/app/scheduler.cxx:486:20\n   #28 in Scheduler::CallbackTaskScheduling() at vcl/source/app/scheduler.cxx:288:5\n   #29 in SalTimer::CallCallback() at vcl/inc/saltimer.hxx:54:13\n   #30 in SvpSalInstance::CheckTimeout(bool) at vcl/headless/svpinst.cxx:210:53\n   #31 in SvpSalInstance::DoYield(bool, bool) at vcl/headless/svpinst.cxx:463:21\n   #32 in ImplYield(bool, bool) at vcl/source/app/svapp.cxx:447:48\n   #33 in Application::Yield() at vcl/source/app/svapp.cxx:511:5\n   #34 in Application::Execute() at vcl/source/app/svapp.cxx:426:9\n   #35 in desktop::Desktop::Main() at desktop/source/app/app.cxx:1588:13\n   #36 in ImplSVMain() at vcl/source/app/svmain.cxx:196:35\n   #37 in SVMain() at vcl/source/app/svmain.cxx:228:12\n   #38 in soffice_main at desktop/source/app/sofficemain.cxx:98:12\n   #39 in sal_main at desktop/source/app/main.c:49:15\n   #40 in main at desktop/source/app/main.c:47:1",
      "range": {
        "startLine": 3014,
        "startChar": 32,
        "endLine": 3014,
        "endChar": 42
      },
      "revId": "244a447734d2abae8896884d4ab73eb4510d243c",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": true
    }
  ]
}