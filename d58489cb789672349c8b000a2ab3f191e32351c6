{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d5bc89b1_afdcd178",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000562
      },
      "writtenOn": "2022-04-04T23:37:20Z",
      "side": 1,
      "message": "Leave the -2 for now; need to verify WASM tomorrow.",
      "revId": "d58489cb789672349c8b000a2ab3f191e32351c6",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "91939952_63171da5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000562
      },
      "writtenOn": "2022-04-05T09:36:11Z",
      "side": 1,
      "message": "Just tested the WASM build. It works for me in \"kwin_wayland --xwayland\" in Debian Buster, with a minor glitch, in comparison to WASM and xcb: if I open a combo box and click on the menu bar, it doesn\u0027t open the menu popup. I must click two more times on the menu bar entry. But that already happened with 7.1.7.\n\n@all: I would like to get some feedback from someone with a more recent Wayland KDE setup.",
      "revId": "d58489cb789672349c8b000a2ab3f191e32351c6",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7093b981_2be7f594",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000789
      },
      "writtenOn": "2022-04-05T14:30:42Z",
      "side": 1,
      "message": "\u003e Just tested the WASM build. It works for me in \"kwin_wayland --xwayland\" in Debian Buster, with a minor glitch, in comparison to WASM and xcb: if I open a combo box and click on the menu bar, it doesn\u0027t open the menu popup. I must click two more times on the menu bar entry. But that already happened with 7.1.7.\n\nWhat exactly are you clicking on in the menu bar?\n\nI\u0027m seeing the following on Debian testing, Plasma Wayland, but I\u0027m not sure whether it\u0027s the same:\nIt works fine initially, but once I click to open the \"Character highlighting Color\" popup button in the Writer toolbar, behaviour is and remains broken. 3 or 4 clicks are needed to open the \"normal\" comboboxes after that as well (and hovering is broken as described in tdf#122293 - maybe sth triggers use of native widgets?).\n\nscreencast: https://nextcloud.documentfoundation.org/s/XTbPNMsJtwRtY7f\n(when comboboxes show up for a longer time without being clicked, everything\u0027s fine, I just didn\u0027t select an entry)\n\nIt works fine when using the TDF-provided LO 7.2.6 instead.",
      "parentUuid": "91939952_63171da5",
      "revId": "d58489cb789672349c8b000a2ab3f191e32351c6",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ba7b871_a9248639",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000789
      },
      "writtenOn": "2022-04-05T16:37:49Z",
      "side": 1,
      "message": "\u003e It works fine initially, but once I click to open the \"Character highlighting Color\" popup button in the Writer toolbar, behaviour is and remains broken. 3 or 4 clicks are needed to open the \"normal\" comboboxes after that as well (and hovering is broken as described in tdf#122293 - maybe sth triggers use of native widgets?).\n\n-\u003e (platform-)\"native *windows*\", not widgets, of course\nIn fact, commenting `pChild-\u003esetAttribute(Qt::WA_NativeWindow)` in `QtFrame::windowHandle` makes things work here, but makes Impress full screen mode crash.",
      "parentUuid": "7093b981_2be7f594",
      "revId": "d58489cb789672349c8b000a2ab3f191e32351c6",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "abb9f3ce_054b2340",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000789
      },
      "writtenOn": "2022-04-05T17:25:07Z",
      "side": 1,
      "message": "\u003e In fact, commenting `pChild-\u003esetAttribute(Qt::WA_NativeWindow)` in `QtFrame::windowHandle` makes things work here, but makes Impress full screen mode crash.\n\nI think what should work is to take the idea from 0e3c3b842e14b9646d3697cf1266be21359e0f13 (\"tdf#122293 qt5: Use \"alien widgets\" by default on Wayland\") further and try harder to avoid creating native windows, e.g. by adding a \u0027bool bCreate\u0027 param to \u0027QtFrame::windowHandle\u0027 and only do `pChild-\u003esetAttribute(Qt::WA_NativeWindow)` for `bCreate\u003dtrue`, then adapt all callers, depending on whether a window handle should be created if there\u0027s none or they\u0027re just fine having none (and just need to do something if there\u0027s a native window anyway).\nIf so, it would probably make sense to do that in a separate commit. What do you think?",
      "parentUuid": "3ba7b871_a9248639",
      "revId": "d58489cb789672349c8b000a2ab3f191e32351c6",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3045350a_405fa93c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000562
      },
      "writtenOn": "2022-04-05T19:02:39Z",
      "side": 1,
      "message": "I forgot that QtFrame::SetParent independently tried to set QWidget parents. As you can see I now completely reverted my workaround for tdf#145363. Setting the correct modal hierarchy, implemented by Caolan for the two breaking dialogs in later patches to the bug reports, avoids the problem altogether. AFAIK the whole QWidget parent setting is the main problem. The \"wrong\" Qt::ToolTip setting for LO\u0027s popup widgets is comparably a minor problem. I don\u0027t want to remember, how many hours the whole problem has really burned over the time. Didn\u0027t help that these two changes seemingly produced these problems together in even more variants... I\u0027m almost reminded of the whole Qt async clipboard handlingâ€¦\n\nAnd I decided to just stay with Qt::ToolTip on all platforms. It worked before, and the minor improvement for accessibility, not advertising the popups as tooltips but windows on X11, but OTOH this critical behavior encoded by insufficient Qt widget / window types, shifted my decision in this direction.",
      "parentUuid": "abb9f3ce_054b2340",
      "revId": "d58489cb789672349c8b000a2ab3f191e32351c6",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}