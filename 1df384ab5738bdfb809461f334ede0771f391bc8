{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0825169b_357f8fab",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000562
      },
      "writtenOn": "2022-04-07T05:32:55Z",
      "side": 1,
      "message": "Don\u0027t know, if you still can test. It might be sufficient as a workaround.\n\nThere are a few problems, like my commit ea4fb1559f7b99a0bfaf18f26cb3b6972c9cde1c / fix for tdf#136918, which uses the global scaling instead of the RenderContext / SalFrame specific one.",
      "revId": "1df384ab5738bdfb809461f334ede0771f391bc8",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3652e5b3_83e78124",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000789
      },
      "writtenOn": "2022-04-07T06:01:24Z",
      "side": 1,
      "message": "The patch itself looks reasonable to me; I don\u0027t really know what to make of what I see when testing...\nScreencast (unfortunately the video is quite blurry): https://nextcloud.documentfoundation.org/s/pTfyn9466RCN6gT\n\nThe left screen uses scaling of 100% (no scaling), the right one 175%\n\nOn first LO start, master is used.\nInterestingly, when the Writer Window opens on the left screen, some scaling appears to be applied (despite the left screen using 100% scaling) as can be seen well for the comboboxes in the menu bar (but that makes it look weird, because scaling is not applied everywhere; might be related to the mentioned ea4fb1559f7b99a0bfaf18f26cb3b6972c9cde1c). Unmaximizing and maximizing again makes no difference.\nAfter moving to the other screen, unmaximizing and maximizing again, full UI area is used, but UI elements are not scaled more than they were on screen one. (After recording, I tested with a window that had the same height as a combobox on screen 1. It was much higher than the combobox after moving LO window and the other one to screen 2.)\n\nFor the second LO start (around 00:40), this Gerrit change is applied. LO correctly opens on screen 1 without scaling. Unmaximizing and maximizing again makes no difference. After moving to screen 2, the problem that not the whole area is still there. After maximizing, unmaximizing, maximizing, scaling does not seem to be applied (only for the Qt-native menu bar).",
      "parentUuid": "0825169b_357f8fab",
      "revId": "1df384ab5738bdfb809461f334ede0771f391bc8",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16e4a6f0_06b27422",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000789
      },
      "writtenOn": "2022-04-07T06:02:22Z",
      "side": 1,
      "message": "Both screens have a resolution of 1920x1080.",
      "parentUuid": "3652e5b3_83e78124",
      "revId": "1df384ab5738bdfb809461f334ede0771f391bc8",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "33a520e9_7beff73d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000562
      },
      "writtenOn": "2022-04-07T08:42:30Z",
      "side": 1,
      "message": "So what to do? And what happens, if you start LO on the 175% screen? Is that initially scaled correctly?",
      "parentUuid": "16e4a6f0_06b27422",
      "revId": "1df384ab5738bdfb809461f334ede0771f391bc8",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "49cf7950_3066eca4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000789
      },
      "writtenOn": "2022-04-07T12:55:45Z",
      "side": 1,
      "message": "My take would be to merge this. It looks correct and improves the situation, even though it\u0027s not enough to fix tdf#141578 by itself.\n\nhttps://nextcloud.documentfoundation.org/s/ZzEqfPXLPfZKMkT shows what happens when I start LO on the 175% screen with the change in place, which gives a similar result as moving the window.\n\nI tested a bit more. Behavior is unchanged also when logging out + in again from the Plasma session after changing display settings.\n\nThe only thing I was concerned about at first was to see that windowHandle() is now called in the ctor unconditionally, but it doesn\u0027t bring back the behavior described in tdf#122293 because `windowHandle()` calls `asChild()-\u003esetAttribute(Qt::WA_NativeWindow)`, with `asChild()` returning the toplevel if set.\nJust for a plausibility check: The behavior from before 0e3c3b842e14b9646d3697cf1266be21359e0f13 was back when testing with this in place in addition:\n\n--- a/vcl/qt5/QtFrame.cxx\n+++ b/vcl/qt5/QtFrame.cxx\n@@ -361,6 +361,8 @@ QWindow* QtFrame::windowHandle() const\n #ifndef EMSCRIPTEN\n     // no idea, why this breaks the menubar for EMSCRIPTEN\n     pChild-\u003esetAttribute(Qt::WA_NativeWindow);\n+    if (m_pQWidget)\n+        m_pQWidget-\u003esetAttribute(Qt::WA_NativeWindow);",
      "parentUuid": "33a520e9_7beff73d",
      "revId": "1df384ab5738bdfb809461f334ede0771f391bc8",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2f1fb2a2_38d8bbc9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000562
      },
      "writtenOn": "2022-04-07T21:20:41Z",
      "side": 1,
      "message": "I\u0027ve added a comment with my Weston setup to the bug report.\n\nIn your 175% video I can see, that LO initially correctly scales its output before it switches to 100% for the whole GUI. Those min/max resize just fixes the internal accounting, so LO then knows the real pixel size, but for whatever reason it doesn\u0027t scale. A simpler QT_SCALE_FACTOR\u003d1.5 works here and scaling works correctly in Weston.",
      "parentUuid": "49cf7950_3066eca4",
      "revId": "1df384ab5738bdfb809461f334ede0771f391bc8",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}