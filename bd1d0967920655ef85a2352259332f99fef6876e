{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e8015487_9c5b1818",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2022-04-29T06:04:58Z",
      "side": 1,
      "message": "this causes regression\n\n  [_RUN_____] TiffFilterTest::testTdf138818\n  \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n  \u003d\u003d23294\u003d\u003dERROR: AddressSanitizer: heap-buffer-overflow on address 0x610000013ef7 at pc 0x7f9f97a58c8f bp 0x7ffc789d7590 sp 0x7ffc789d7588\n  READ of size 1 at 0x610000013ef7 thread T0\n      #0 0x7f9f97a58c8e in (anonymous namespace)::TIFFReader::GetBits(unsigned char const*, unsigned int, unsigned int) const /vcl/source/filter/itiff/itiff.cxx:809:41\n      #1 0x7f9f97a519bb in (anonymous namespace)::TIFFReader::ConvertScanline(int) /vcl/source/filter/itiff/itiff.cxx:920:33\n      #2 0x7f9f97a47f01 in (anonymous namespace)::TIFFReader::ReadMap() /vcl/source/filter/itiff/itiff.cxx:707:19\n      #3 0x7f9f97a34458 in (anonymous namespace)::TIFFReader::ReadTIFF(SvStream\u0026, Graphic\u0026) /vcl/source/filter/itiff/itiff.cxx:1629:32\n      #4 0x7f9f97a27311 in ImportTiffGraphicImport(SvStream\u0026, Graphic\u0026) /vcl/source/filter/itiff/itiff.cxx:1701:28\n      #5 0x7f9f9766ab4e in GraphicFilter::readTIFF(SvStream\u0026, Graphic\u0026, GfxLinkType\u0026) /vcl/source/filter/graphicfilter.cxx:1202:9\n      #6 0x7f9f97657350 in GraphicFilter::ImportGraphic(Graphic\u0026, rtl::OUString const\u0026, SvStream\u0026, unsigned short, unsigned short*, GraphicFilterImportFlags, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const*, WmfExternal const*) /vcl/source/filter/graphicfilter.cxx:1456:23\n      #7 0x7f9f97654264 in GraphicFilter::ImportGraphic(Graphic\u0026, rtl::OUString const\u0026, SvStream\u0026, unsigned short, unsigned short*, GraphicFilterImportFlags, WmfExternal const*) /vcl/source/filter/graphicfilter.cxx:548:12\n      #8 0x7f9f78f39673 in TiffFilterTest::testTdf138818() /vcl/qa/cppunit/graphicfilter/filters-tiff-test.cxx:123:31\n      #9 0x7f9f78f5d977 in void std::__invoke_impl\u003cvoid, void (TiffFilterTest::*\u0026)(), TiffFilterTest*\u0026\u003e(std::__invoke_memfun_deref, void (TiffFilterTest::*\u0026)(), TiffFilterTest*\u0026) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/invoke.h:73:14\n      #10 0x7f9f78f5d5e4 in std::__invoke_result\u003cvoid (TiffFilterTest::*\u0026)(), TiffFilterTest*\u0026\u003e::type std::__invoke\u003cvoid (TiffFilterTest::*\u0026)(), TiffFilterTest*\u0026\u003e(void (TiffFilterTest::*\u0026)(), TiffFilterTest*\u0026) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/invoke.h:95:14\n      #11 0x7f9f78f5d460 in void std::_Bind\u003cvoid (TiffFilterTest::* (TiffFilterTest*))()\u003e::__call\u003cvoid, 0ul\u003e(std::tuple\u003c\u003e\u0026\u0026, std::_Index_tuple\u003c0ul\u003e) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/functional:467:11\n      #12 0x7f9f78f5d134 in void std::_Bind\u003cvoid (TiffFilterTest::* (TiffFilterTest*))()\u003e::operator()\u003cvoid\u003e() /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/functional:549:17\n      #13 0x7f9f78f5c34c in std::_Function_handler\u003cvoid (), std::_Bind\u003cvoid (TiffFilterTest::* (TiffFilterTest*))()\u003e \u003e::_M_invoke(std::_Any_data const\u0026) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/std_function.h:316:2\n      #14 0x7f9f78ee4a51 in std::function\u003cvoid ()\u003e::operator()() const /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/std_function.h:706:14\n      #15 0x7f9f78f5b738 in CppUnit::TestCaller\u003cTiffFilterTest\u003e::runTest() /workdir/UnpackedTarball/cppunit/include/cppunit/TestCaller.h:175:7\n      #16 0x7f9fbc01dd9b in CppUnit::TestCaseMethodFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x296d9b)\n      #17 0x7f9fa0de28a0 in (anonymous namespace)::Protector::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /test/source/vclbootstrapprotector.cxx:46:14\n      #18 0x7f9fbbff257c in CppUnit::ProtectorChain::ProtectFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x26b57c)\n      #19 0x7f9fac9fdd40 in (anonymous namespace)::Prot::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /unotest/source/cpp/unobootstrapprotector/unobootstrapprotector.cxx:78:12\n      #20 0x7f9fbbff257c in CppUnit::ProtectorChain::ProtectFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x26b57c)\n      #21 0x7f9fafdafc4e in (anonymous namespace)::Prot::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /unotest/source/cpp/unoexceptionprotector/unoexceptionprotector.cxx:62:16\n      #22 0x7f9fbbff257c in CppUnit::ProtectorChain::ProtectFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x26b57c)\n      #23 0x7f9fbbf8f082 in CppUnit::DefaultProtector::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x208082)\n      #24 0x7f9fbbff257c in CppUnit::ProtectorChain::ProtectFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x26b57c)\n      #25 0x7f9fbbfec868 in CppUnit::ProtectorChain::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x265868)\n      #26 0x7f9fbc08154d in CppUnit::TestResult::protect(CppUnit::Functor const\u0026, CppUnit::Test*, std::string const\u0026) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x2fa54d)\n      #27 0x7f9fbc01c1b7 in CppUnit::TestCase::run(CppUnit::TestResult*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x2951b7)\n      #28 0x7f9fbc020321 in CppUnit::TestComposite::doRunChildTests(CppUnit::TestResult*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x299321)\n      #29 0x7f9fbc01f578 in CppUnit::TestComposite::run(CppUnit::TestResult*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x298578)\n      #30 0x7f9fbc020321 in CppUnit::TestComposite::doRunChildTests(CppUnit::TestResult*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x299321)\n      #31 0x7f9fbc01f578 in CppUnit::TestComposite::run(CppUnit::TestResult*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x298578)\n      #32 0x7f9fbc0ab816 in CppUnit::TestRunner::WrappingSuite::run(CppUnit::TestResult*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x324816)\n      #33 0x7f9fbc08000e in CppUnit::TestResult::runTest(CppUnit::Test*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x2f900e)\n      #34 0x7f9fbc0ac6d2 in CppUnit::TestRunner::run(CppUnit::TestResult\u0026, std::string const\u0026) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x3256d2)\n      #35 0x50626e in (anonymous namespace)::ProtectedFixtureFunctor::run() const /sal/cppunittester/cppunittester.cxx:332:20\n      #36 0x502c58 in main2() /sal/cppunittester/cppunittester.cxx:481:16\n      #37 0x5010b1 in sal_main() /sal/cppunittester/cppunittester.cxx:647:14\n      #38 0x500efe in main /sal/cppunittester/cppunittester.cxx:642:1\n      #39 0x7f9fba10e554 in __libc_start_main /usr/src/debug/glibc-2.17-c758a686/csu/../csu/libc-start.c:266\n      #40 0x4257b4 in _start (/workdir/LinkTarget/Executable/cppunittester+0x4257b4)\n  \n  0x610000013ef7 is located 0 bytes to the right of 183-byte region [0x610000013e40,0x610000013ef7)\n  allocated by thread T0 here:\n      #0 0x4fd6e8 in operator new(unsigned long) /home/tdf/lode/packages/llvm-llvmorg-12.0.1.src/compiler-rt/lib/asan/asan_new_delete.cpp:99\n      #1 0x7f9f961bf953 in __gnu_cxx::new_allocator\u003cunsigned char\u003e::allocate(unsigned long, void const*) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/ext/new_allocator.h:111:27\n      #2 0x7f9f961bf8ba in std::allocator_traits\u003cstd::allocator\u003cunsigned char\u003e \u003e::allocate(std::allocator\u003cunsigned char\u003e\u0026, unsigned long) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/alloc_traits.h:436:20\n      #3 0x7f9f961bf84f in std::__cxx1998::_Vector_base\u003cunsigned char, std::allocator\u003cunsigned char\u003e \u003e::_M_allocate(unsigned long) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/stl_vector.h:172:20\n      #4 0x7f9f963b2fc4 in std::__cxx1998::vector\u003cunsigned char, std::allocator\u003cunsigned char\u003e \u003e::_M_default_append(unsigned long) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/vector.tcc:571:34\n      #5 0x7f9f963b1c05 in std::__cxx1998::vector\u003cunsigned char, std::allocator\u003cunsigned char\u003e \u003e::resize(unsigned long) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/stl_vector.h:692:4\n      #6 0x7f9f96372905 in std::__debug::vector\u003cunsigned char, std::allocator\u003cunsigned char\u003e \u003e::resize(unsigned long) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/debug/vector:347:9\n      #7 0x7f9f97a4fd39 in (anonymous namespace)::TIFFReader::getMapData(unsigned int) /vcl/source/filter/itiff/itiff.cxx:553:14\n      #8 0x7f9f97a47ad2 in (anonymous namespace)::TIFFReader::ReadMap() /vcl/source/filter/itiff/itiff.cxx:699:45\n      #9 0x7f9f97a34458 in (anonymous namespace)::TIFFReader::ReadTIFF(SvStream\u0026, Graphic\u0026) /vcl/source/filter/itiff/itiff.cxx:1629:32\n      #10 0x7f9f97a27311 in ImportTiffGraphicImport(SvStream\u0026, Graphic\u0026) /vcl/source/filter/itiff/itiff.cxx:1701:28\n      #11 0x7f9f9766ab4e in GraphicFilter::readTIFF(SvStream\u0026, Graphic\u0026, GfxLinkType\u0026) /vcl/source/filter/graphicfilter.cxx:1202:9\n      #12 0x7f9f97657350 in GraphicFilter::ImportGraphic(Graphic\u0026, rtl::OUString const\u0026, SvStream\u0026, unsigned short, unsigned short*, GraphicFilterImportFlags, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const*, WmfExternal const*) /vcl/source/filter/graphicfilter.cxx:1456:23\n      #13 0x7f9f97654264 in GraphicFilter::ImportGraphic(Graphic\u0026, rtl::OUString const\u0026, SvStream\u0026, unsigned short, unsigned short*, GraphicFilterImportFlags, WmfExternal const*) /vcl/source/filter/graphicfilter.cxx:548:12\n      #14 0x7f9f78f39673 in TiffFilterTest::testTdf138818() /vcl/qa/cppunit/graphicfilter/filters-tiff-test.cxx:123:31\n      #15 0x7f9f78f5d977 in void std::__invoke_impl\u003cvoid, void (TiffFilterTest::*\u0026)(), TiffFilterTest*\u0026\u003e(std::__invoke_memfun_deref, void (TiffFilterTest::*\u0026)(), TiffFilterTest*\u0026) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/invoke.h:73:14\n      #16 0x7f9f78f5d5e4 in std::__invoke_result\u003cvoid (TiffFilterTest::*\u0026)(), TiffFilterTest*\u0026\u003e::type std::__invoke\u003cvoid (TiffFilterTest::*\u0026)(), TiffFilterTest*\u0026\u003e(void (TiffFilterTest::*\u0026)(), TiffFilterTest*\u0026) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/invoke.h:95:14\n      #17 0x7f9f78f5d460 in void std::_Bind\u003cvoid (TiffFilterTest::* (TiffFilterTest*))()\u003e::__call\u003cvoid, 0ul\u003e(std::tuple\u003c\u003e\u0026\u0026, std::_Index_tuple\u003c0ul\u003e) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/functional:467:11\n      #18 0x7f9f78f5d134 in void std::_Bind\u003cvoid (TiffFilterTest::* (TiffFilterTest*))()\u003e::operator()\u003cvoid\u003e() /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/functional:549:17\n      #19 0x7f9f78f5c34c in std::_Function_handler\u003cvoid (), std::_Bind\u003cvoid (TiffFilterTest::* (TiffFilterTest*))()\u003e \u003e::_M_invoke(std::_Any_data const\u0026) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/std_function.h:316:2\n      #20 0x7f9f78ee4a51 in std::function\u003cvoid ()\u003e::operator()() const /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/std_function.h:706:14\n      #21 0x7f9f78f5b738 in CppUnit::TestCaller\u003cTiffFilterTest\u003e::runTest() /workdir/UnpackedTarball/cppunit/include/cppunit/TestCaller.h:175:7\n      #22 0x7f9fbc01dd9b in CppUnit::TestCaseMethodFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x296d9b)\n      #23 0x7f9fa0de28a0 in (anonymous namespace)::Protector::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /test/source/vclbootstrapprotector.cxx:46:14\n      #24 0x7f9fbbff257c in CppUnit::ProtectorChain::ProtectFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x26b57c)\n      #25 0x7f9fac9fdd40 in (anonymous namespace)::Prot::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /unotest/source/cpp/unobootstrapprotector/unobootstrapprotector.cxx:78:12\n      #26 0x7f9fbbff257c in CppUnit::ProtectorChain::ProtectFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x26b57c)\n      #27 0x7f9fafdafc4e in (anonymous namespace)::Prot::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /unotest/source/cpp/unoexceptionprotector/unoexceptionprotector.cxx:62:16\n      #28 0x7f9fbbff257c in CppUnit::ProtectorChain::ProtectFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x26b57c)\n      #29 0x7f9fbbf8f082 in CppUnit::DefaultProtector::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x208082)\n  \n  SUMMARY: AddressSanitizer: heap-buffer-overflow /vcl/source/filter/itiff/itiff.cxx:809:41 in (anonymous namespace)::TIFFReader::GetBits(unsigned char const*, unsigned int, unsigned int) const\n  Shadow bytes around the buggy address:\n    0x0c207fffa780: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\n    0x0c207fffa790: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n    0x0c207fffa7a0: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\n    0x0c207fffa7b0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n    0x0c207fffa7c0: fa fa fa fa fa fa fa fa 00 00 00 00 00 00 00 00\n  \u003d\u003e0x0c207fffa7d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00[07]fa\n    0x0c207fffa7e0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n    0x0c207fffa7f0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n    0x0c207fffa800: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n    0x0c207fffa810: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n    0x0c207fffa820: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\n  Shadow byte legend (one shadow byte represents 8 application bytes):\n    Addressable:           00\n    Partially addressable: 01 02 03 04 05 06 07 \n    Heap left redzone:       fa\n    Freed heap region:       fd\n    Stack left redzone:      f1\n    Stack mid redzone:       f2\n    Stack right redzone:     f3\n    Stack after return:      f5\n    Stack use after scope:   f8\n    Global redzone:          f9\n    Global init order:       f6\n    Poisoned by user:        f7\n    Container overflow:      fc\n    Array cookie:            ac\n    Intra object redzone:    bb\n    ASan internal:           fe\n    Left alloca redzone:     ca\n    Right alloca redzone:    cb\n    Shadow gap:              cc\n  \u003d\u003d23294\u003d\u003dABORTING\n  \n  Error: a unit test failed, please do one of:\n  \n  make CppunitTest_vcl_filters_test CPPUNITTRACE\u003d\"gdb --args\"\n      # for interactive debugging on Linux\n  make CppunitTest_vcl_filters_test VALGRIND\u003dmemcheck\n      # for memory checking\n  make CppunitTest_vcl_filters_test DEBUGCPPUNIT\u003dTRUE\n      # for exception catching\n  \n  You can limit the execution to just one particular test by:\n  \n  make CPPUNIT_TEST_NAME\u003d\"testXYZ\" ...above mentioned params...\n  \n  make[1]: *** [/home/tdf/lode/jenkins/workspace/lo_ubsan/solenv/gbuild/CppunitTest.mk:119: /home/tdf/lode/jenkins/workspace/lo_ubsan/workdir/CppunitTest/vcl_filters_test.test] Error 1\n\n(\u003chttps://ci.libreoffice.org/job/lo_ubsan/2382\u003e)",
      "revId": "bd1d0967920655ef85a2352259332f99fef6876e",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}