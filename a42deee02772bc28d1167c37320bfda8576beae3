{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "42fdb49b_bdd5e53e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000135
      },
      "writtenOn": "2022-04-28T08:00:13Z",
      "side": 1,
      "message": "Any ideas what\u0027s the problem with this one?",
      "revId": "a42deee02772bc28d1167c37320bfda8576beae3",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ca729984_3af2fad9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000013
      },
      "writtenOn": "2022-04-28T08:21:20Z",
      "side": 1,
      "message": "Looks like a use-after-free. Sanitizers say this:\n\n\u003e $ UBSAN_OPTIONS\u003dhalt_on_error\u003d0:print_stacktrace\u003d1:suppressions\u003d/home/vmiklos/git/libreoffice/master-san/solenv/sanitizers/ubsan-suppressions  instdir/program/soffice.bin ../master-clang/sw/qa/core/data/rtf/pass/forcepoint-105.rtf\n\u003e ...\n\u003e \u003d\u003d3921\u003d\u003dERROR: AddressSanitizer: heap-use-after-free on address 0x60c0001ddee0 at pc 0x7f17eb57e1d5 bp 0x7fffbec46970 sp 0x7fffbec46968\n\u003e READ of size 8 at 0x60c0001ddee0 thread T0\n\u003e     #0 0x7f17eb57e1d4 in SwNode::SwNode(SwNodeIndex const\u0026, SwNodeType) /sw/source/core/docnode/node.cxx:310:38\n\u003e     #1 0x7f17eb592d82 in SwStartNode::SwStartNode(SwNodeIndex const\u0026, SwNodeType, SwStartNodeType) /sw/source/core/docnode/node.cxx:951:7\n\u003e     #2 0x7f17eb62e2e2 in SwNodes::MakeEmptySection(SwNodeIndex const\u0026, SwStartNodeType) /sw/source/core/docnode/nodes.cxx:1888:31\n\u003e     #3 0x7f17ea3fe56d in SwDoc::CopyPageDescHeaderFooterImpl(bool, SwFrameFormat const\u0026, SwFrameFormat\u0026) /sw/source/core/doc/docfmt.cxx:1401:35\n\u003e     #4 0x7f17ea42d989 in SwDoc::CopyHeader(SwFrameFormat const\u0026, SwFrameFormat\u0026) /sw/inc/doc.hxx:895:11\n\u003e     #5 0x7f17ea403e56 in SwDoc::CopyPageDesc(SwPageDesc const\u0026, SwPageDesc\u0026, bool) /sw/source/core/doc/docfmt.cxx:1498:5\n\u003e     #6 0x7f17efc0dedb in SwDocStyleSheet::SetItemSet(SfxItemSet const\u0026, bool) /sw/source/uibase/app/docstyle.cxx:1585:28\n\u003e     #7 0x7f17eea61e3b in (anonymous namespace)::SwXPageStyle::SetPropertyValues_Impl(com::sun::star::uno::Sequence\u003crtl::OUString\u003e const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::uno::Any\u003e const\u0026) /sw/source/core/unocore/unostyle.cxx:3038:33\n\u003e     #8 0x7f17eea59feb in (anonymous namespace)::SwXPageStyle::setPropertyValues(com::sun::star::uno::Sequence\u003crtl::OUString\u003e const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::uno::Any\u003e const\u0026) /sw/source/core/unocore/unostyle.cxx:3049:9\n\u003e     #9 0x7f17dcb9df69 in writerfilter::dmapper::SectionPropertyMap::ApplyProperties_(com::sun::star::uno::Reference\u003ccom::sun::star::beans::XPropertySet\u003e const\u0026) /writerfilter/source/dmapper/PropertyMap.cxx:2028:24\n\u003e     #10 0x7f17dcbb5dc4 in writerfilter::dmapper::SectionPropertyMap::CloseSectionGroup(writerfilter::dmapper::DomainMapper_Impl\u0026) /writerfilter/source/dmapper/PropertyMap.cxx:1790:13\n\u003e     #11 0x7f17dc31e1ec in writerfilter::dmapper::DomainMapper::lcl_endSectionGroup() /writerfilter/source/dmapper/DomainMapper.cxx:3108:26\n\u003e     #12 0x7f17dc954ad3 in writerfilter::LoggedStream::endSectionGroup() /writerfilter/source/dmapper/LoggedResources.cxx:89:5\n\u003e     #13 0x7f17dbfb87cf in writerfilter::rtftok::RTFDocumentImpl::sectBreak(bool) /writerfilter/source/rtftok/rtfdocumentimpl.cxx:708:18\n\u003e     #14 0x7f17dc036060 in writerfilter::rtftok::RTFDocumentImpl::popState() /writerfilter/source/rtftok/rtfdocumentimpl.cxx:3518:13\n\u003e     #15 0x7f17dc228213 in writerfilter::rtftok::RTFTokenizer::resolveParse() /writerfilter/source/rtftok/rtftokenizer.cxx:113:37\n\u003e     #16 0x7f17dbfbd32f in writerfilter::rtftok::RTFDocumentImpl::resolve(writerfilter::Stream\u0026) /writerfilter/source/rtftok/rtfdocumentimpl.cxx:809:27\n\u003e     #17 0x7f17dce1f849 in (anonymous namespace)::RtfFilter::filter(com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) /writerfilter/source/filter/RtfFilter.cxx:163:20\n\u003e ...\n\u003e \n\u003e 0x60c0001ddee0 is located 96 bytes inside of 120-byte region [0x60c0001dde80,0x60c0001ddef8)\n\u003e freed by thread T0 here:\n\u003e     #0 0x4ecc30 in operator delete(void*) /home/vmiklos/git/libreoffice/lode/packages/llvm-llvmorg-9.0.1.src/compiler-rt/lib/asan/asan_new_delete.cc:160\n\u003e     #1 0x7f17eb5c7fa0 in SwStartNode::~SwStartNode() /sw/inc/node.hxx:312:26\n\u003e     #2 0x7f17eb5f9c13 in SwNodes::RemoveNode(unsigned long, unsigned long, bool) /sw/source/core/docnode/nodes.cxx:2274:13\n\u003e     #3 0x7f17eb610d88 in SwNodes::DelNodes(SwNodeIndex const\u0026, unsigned long) /sw/source/core/docnode/nodes.cxx:1381:9\n\u003e     #4 0x7f17eb61bf23 in SwNodes::Delete(SwNodeIndex const\u0026, unsigned long) /sw/source/core/docnode/nodes.cxx:1229:9\n\u003e     #5 0x7f17eaa84ccb in sw::DocumentContentOperationsManager::DelFullPara(SwPaM\u0026) /sw/source/core/doc/DocumentContentOperationsManager.cxx:2287:27\n\u003e     #6 0x7f17eec4a47a in SwXText::copyText(com::sun::star::uno::Reference\u003ccom::sun::star::text::XTextCopy\u003e const\u0026) /sw/source/core/unocore/unotext.cxx:2303:62\n\u003e     #7 0x7f17dcb8db49 in writerfilter::dmapper::SectionPropertyMap::CopyHeaderFooterTextProperty(com::sun::star::uno::Reference\u003ccom::sun::star::beans::XPropertySet\u003e const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::beans::XPropertySet\u003e const\u0026, writerfilter::dmapper::PropertyIds) /writerfilter/source/dmapper/PropertyMap.cxx:875:15\n\u003e     #8 0x7f17dcb8f67b in writerfilter::dmapper::SectionPropertyMap::CopyHeaderFooter(com::sun::star::uno::Reference\u003ccom::sun::star::beans::XPropertySet\u003e const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::beans::XPropertySet\u003e const\u0026, bool, bool, bool, bool) /writerfilter/source/dmapper/PropertyMap.cxx:909:13\n\u003e     #9 0x7f17dcb91e97 in writerfilter::dmapper::SectionPropertyMap::CopyLastHeaderFooter(bool, writerfilter::dmapper::DomainMapper_Impl\u0026) /writerfilter/source/dmapper/PropertyMap.cxx:973:13\n\u003e     #10 0x7f17dcb986f6 in writerfilter::dmapper::SectionPropertyMap::HandleMarginsHeaderFooter(bool, writerfilter::dmapper::DomainMapper_Impl\u0026) /writerfilter/source/dmapper/PropertyMap.cxx:1115:5\n\u003e     #11 0x7f17dcbb14ed in writerfilter::dmapper::SectionPropertyMap::CloseSectionGroup(writerfilter::dmapper::DomainMapper_Impl\u0026) /writerfilter/source/dmapper/PropertyMap.cxx:1679:13\n\u003e     #12 0x7f17dc31e1ec in writerfilter::dmapper::DomainMapper::lcl_endSectionGroup() /writerfilter/source/dmapper/DomainMapper.cxx:3108:26\n\u003e     #13 0x7f17dc954ad3 in writerfilter::LoggedStream::endSectionGroup() /writerfilter/source/dmapper/LoggedResources.cxx:89:5\n\u003e     #14 0x7f17dbfb87cf in writerfilter::rtftok::RTFDocumentImpl::sectBreak(bool) /writerfilter/source/rtftok/rtfdocumentimpl.cxx:708:18\n\u003e     #15 0x7f17dc036060 in writerfilter::rtftok::RTFDocumentImpl::popState() /writerfilter/source/rtftok/rtfdocumentimpl.cxx:3518:13\n\u003e     #16 0x7f17dc228213 in writerfilter::rtftok::RTFTokenizer::resolveParse() /writerfilter/source/rtftok/rtftokenizer.cxx:113:37\n\u003e     #17 0x7f17dbfbd32f in writerfilter::rtftok::RTFDocumentImpl::resolve(writerfilter::Stream\u0026) /writerfilter/source/rtftok/rtfdocumentimpl.cxx:809:27\n\u003e     #18 0x7f17dce1f849 in (anonymous namespace)::RtfFilter::filter(com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) /writerfilter/source/filter/RtfFilter.cxx:163:20\n\u003e ...\n\u003e \n\u003e previously allocated by thread T0 here:\n\u003e     #0 0x4ec238 in operator new(unsigned long) /home/vmiklos/git/libreoffice/lode/packages/llvm-llvmorg-9.0.1.src/compiler-rt/lib/asan/asan_new_delete.cc:99\n\u003e     #1 0x7f17eb62e5ad in SwNodes::MakeTextSection(SwNodeIndex const\u0026, SwStartNodeType, SwTextFormatColl*) /sw/source/core/docnode/nodes.cxx:1897:27\n\u003e     #2 0x7f17eadbc82e in sw::DocumentLayoutManager::MakeLayoutFormat(RndStdIds, SfxItemSet const*) /sw/source/core/doc/DocumentLayoutManager.cxx:135:35\n\u003e     #3 0x7f17ec19327b in SwFrameFormat::SwClientNotify(SwModify const\u0026, SfxHint const\u0026) /sw/source/core/layout/atrfrm.cxx:2680:71\n\u003e     #4 0x7f17e97973f7 in sw::ClientNotifyAttrChg(SwModify\u0026, SwAttrSet const\u0026, SwAttrSet\u0026, SwAttrSet\u0026) /sw/source/core/attr/calbck.cxx:337:13\n\u003e     #5 0x7f17e97e3b8d in SwFormat::SetFormatAttr(SfxPoolItem const\u0026) /sw/source/core/attr/format.cxx:523:13\n\u003e     #6 0x7f17f169e603 in ItemSetToPageDesc(SfxItemSet const\u0026, SwPageDesc\u0026) /sw/source/uibase/utlui/uitool.cxx:340:25\n\u003e     #7 0x7f17efc0f8f3 in SwDocStyleSheet::SetItemSet(SfxItemSet const\u0026, bool) /sw/source/uibase/app/docstyle.cxx:1661:13\n\u003e     #8 0x7f17eea61e3b in (anonymous namespace)::SwXPageStyle::SetPropertyValues_Impl(com::sun::star::uno::Sequence\u003crtl::OUString\u003e const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::uno::Any\u003e const\u0026) /sw/source/core/unocore/unostyle.cxx:3038:33\n\u003e     #9 0x7f17eea59feb in (anonymous namespace)::SwXPageStyle::setPropertyValues(com::sun::star::uno::Sequence\u003crtl::OUString\u003e const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::uno::Any\u003e const\u0026) /sw/source/core/unocore/unostyle.cxx:3049:9\n\u003e     #10 0x7f17dcb8f588 in writerfilter::dmapper::SectionPropertyMap::CopyHeaderFooter(com::sun::star::uno::Reference\u003ccom::sun::star::beans::XPropertySet\u003e const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::beans::XPropertySet\u003e const\u0026, bool, bool, bool, bool) /writerfilter/source/dmapper/PropertyMap.cxx:906:20\n\u003e     #11 0x7f17dcb91e97 in writerfilter::dmapper::SectionPropertyMap::CopyLastHeaderFooter(bool, writerfilter::dmapper::DomainMapper_Impl\u0026) /writerfilter/source/dmapper/PropertyMap.cxx:973:13\n\u003e     #12 0x7f17dcb986f6 in writerfilter::dmapper::SectionPropertyMap::HandleMarginsHeaderFooter(bool, writerfilter::dmapper::DomainMapper_Impl\u0026) /writerfilter/source/dmapper/PropertyMap.cxx:1115:5\n\u003e     #13 0x7f17dcbb14ed in writerfilter::dmapper::SectionPropertyMap::CloseSectionGroup(writerfilter::dmapper::DomainMapper_Impl\u0026) /writerfilter/source/dmapper/PropertyMap.cxx:1679:13\n\u003e     #14 0x7f17dc31e1ec in writerfilter::dmapper::DomainMapper::lcl_endSectionGroup() /writerfilter/source/dmapper/DomainMapper.cxx:3108:26\n\u003e     #15 0x7f17dc954ad3 in writerfilter::LoggedStream::endSectionGroup() /writerfilter/source/dmapper/LoggedResources.cxx:89:5\n\u003e     #16 0x7f17dbfb87cf in writerfilter::rtftok::RTFDocumentImpl::sectBreak(bool) /writerfilter/source/rtftok/rtfdocumentimpl.cxx:708:18\n\u003e     #17 0x7f17dc036060 in writerfilter::rtftok::RTFDocumentImpl::popState() /writerfilter/source/rtftok/rtfdocumentimpl.cxx:3518:13\n\u003e     #18 0x7f17dc228213 in writerfilter::rtftok::RTFTokenizer::resolveParse() /writerfilter/source/rtftok/rtftokenizer.cxx:113:37\n\u003e     #19 0x7f17dbfbd32f in writerfilter::rtftok::RTFDocumentImpl::resolve(writerfilter::Stream\u0026) /writerfilter/source/rtftok/rtfdocumentimpl.cxx:809:27\n\u003e     #20 0x7f17dce1f849 in (anonymous namespace)::RtfFilter::filter(com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) /writerfilter/source/filter/RtfFilter.cxx:163:20\n\u003e ...\n\u003e \n\u003e SUMMARY: AddressSanitizer: heap-use-after-free /sw/source/core/docnode/node.cxx:310:38 in SwNode::SwNode(SwNodeIndex const\u0026, SwNodeType)\n\u003e Shadow bytes around the buggy address:\n\u003e   0x0c1880033b80: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\n\u003e   0x0c1880033b90: fd fd fd fd fd fd fd fd fa fa fa fa fa fa fa fa\n\u003e   0x0c1880033ba0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n\u003e   0x0c1880033bb0: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\n\u003e   0x0c1880033bc0: fd fd fd fd fd fd fd fd fa fa fa fa fa fa fa fa\n\u003e \u003d\u003e0x0c1880033bd0: fd fd fd fd fd fd fd fd fd fd fd fd[fd]fd fd fa\n\u003e   0x0c1880033be0: fa fa fa fa fa fa fa fa 00 00 00 00 00 00 00 00\n\u003e   0x0c1880033bf0: 00 00 00 00 00 00 00 00 fa fa fa fa fa fa fa fa\n\u003e   0x0c1880033c00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n\u003e   0x0c1880033c10: fa fa fa fa fa fa fa fa 00 00 00 00 00 00 00 00\n\u003e   0x0c1880033c20: 00 00 00 00 00 00 00 00 fa fa fa fa fa fa fa fa\n\u003e Shadow byte legend (one shadow byte represents 8 application bytes):\n\u003e   Addressable:           00\n\u003e   Partially addressable: 01 02 03 04 05 06 07 \n\u003e   Heap left redzone:       fa\n\u003e   Freed heap region:       fd\n\u003e   Stack left redzone:      f1\n\u003e   Stack mid redzone:       f2\n\u003e   Stack right redzone:     f3\n\u003e   Stack after return:      f5\n\u003e   Stack use after scope:   f8\n\u003e   Global redzone:          f9\n\u003e   Global init order:       f6\n\u003e   Poisoned by user:        f7\n\u003e   Container overflow:      fc\n\u003e   Array cookie:            ac\n\u003e   Intra object redzone:    bb\n\u003e   ASan internal:           fe\n\u003e   Left alloca redzone:     ca\n\u003e   Right alloca redzone:    cb\n\u003e   Shadow gap:              cc\n\u003e \u003d\u003d3921\u003d\u003dABORTING\n",
      "revId": "a42deee02772bc28d1167c37320bfda8576beae3",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}