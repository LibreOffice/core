{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "991baa4f_e93121a4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2021-12-19T21:14:30Z",
      "side": 1,
      "message": "bisecting shows this causes CppunitTest_sw_uiwriter2 to fail with\n\n  [_RUN_____] testUnfloatButton::TestBody\n  \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n  \u003d\u003d2307540\u003d\u003dERROR: AddressSanitizer: heap-use-after-free on address 0x6130002dc8b8 at pc 0x7f7382f6155f bp 0x7ffc059bc1c0 sp 0x7ffc059bc1b8\n  WRITE of size 1 at 0x6130002dc8b8 thread T0\n   #0 in SwBorderAttrs::~SwBorderAttrs() at sw/source/core/layout/frmtool.cxx:2263:104\n   #1 in SwBorderAttrs::~SwBorderAttrs() at sw/source/core/layout/frmtool.cxx:2262:1\n   #2 in std::default_delete\u003cSwCacheObj\u003e::operator()(SwCacheObj*) const at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/12.0.0/../../../../include/c++/12.0.0/bits/unique_ptr.h:85:2\n   #3 in std::__uniq_ptr_impl\u003cSwCacheObj, std::default_delete\u003cSwCacheObj\u003e \u003e::reset(SwCacheObj*) at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/12.0.0/../../../../include/c++/12.0.0/bits/unique_ptr.h:182:4\n   #4 in std::unique_ptr\u003cSwCacheObj, std::default_delete\u003cSwCacheObj\u003e \u003e::reset(SwCacheObj*) at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/12.0.0/../../../../include/c++/12.0.0/bits/unique_ptr.h:460:7\n   #5 in SwCache::Insert(SwCacheObj*, bool) at sw/source/core/bastyp/swcache.cxx:416:31\n   #6 in SwCacheAccess::Get_(bool) at sw/source/core/bastyp/swcache.cxx:498:19\n   #7 in SwCacheAccess::Get(bool) at sw/source/core/inc/swcache.hxx:260:9\n   #8 in SwBorderAttrAccess::Get() at sw/source/core/layout/frmtool.cxx:2669:55\n   #9 in SwContentFrame::MakeAll(OutputDevice*) at sw/source/core/layout/calcmove.cxx:1266:44\n   #10 in SwFrame::OptPrepareMake() at sw/source/core/layout/calcmove.cxx:399:9\n   #11 in SwFrame::OptCalc() const at sw/source/core/inc/frame.hxx:1085:37\n   #12 in SwLayAction::FormatLayout(OutputDevice*, SwLayoutFrame*, bool) at sw/source/core/layout/layact.cxx:1414:19\n   #13 in SwLayAction::FormatLayout(OutputDevice*, SwLayoutFrame*, bool) at sw/source/core/layout/layact.cxx:1407:29\n   #14 in SwLayAction::FormatLayoutTab(SwTabFrame*, bool) at sw/source/core/layout/layact.cxx:1626:25\n   #15 in SwLayAction::FormatLayoutFly(SwFlyFrame*) at sw/source/core/layout/layact.cxx:1479:17\n   #16 in SwObjectFormatter::FormatObj_(SwAnchoredObject\u0026) at sw/source/core/layout/objectformatter.cxx:286:30\n   #17 in SwObjectFormatterTextFrame::DoFormatObj(SwAnchoredObject\u0026, bool) at sw/source/core/layout/objectformattertxtfrm.cxx:136:9\n   #18 in SwObjectFormatter::FormatObjsAtFrame_(SwTextFrame*) at sw/source/core/layout/objectformatter.cxx:408:19\n   #19 in SwObjectFormatterTextFrame::DoFormatObjs() at sw/source/core/layout/objectformattertxtfrm.cxx:351:20\n   #20 in SwObjectFormatter::FormatObjsAtFrame(SwFrame\u0026, SwPageFrame const\u0026, SwLayAction*) at sw/source/core/layout/objectformatter.cxx:160:35\n   #21 in SwLayAction::FormatContent(SwPageFrame*) at sw/source/core/layout/layact.cxx:1712:19\n   #22 in SwLayAction::InternalAction(OutputDevice*) at sw/source/core/layout/layact.cxx:587:31\n   #23 in SwLayAction::Action(OutputDevice*) at sw/source/core/layout/layact.cxx:385:5\n   #24 in SwViewShell::ImplEndAction(bool) at sw/source/core/view/viewsh.cxx:292:17\n   #25 in SwViewShell::EndAction(bool) at sw/inc/viewsh.hxx:603:9\n   #26 in SwCursorShell::EndAction(bool) at sw/source/core/crsr/crsrsh.cxx:263:18\n   #27 in SwView::OuterResizePixel(Point const\u0026, Size const\u0026) at sw/source/uibase/uiview/viewport.cxx:1116:22\n   #28 in SfxViewFrame::DoAdjustPosSizePixel(SfxViewShell*, Point const\u0026, Size const\u0026, bool) at sfx2/source/view/viewfrm.cxx:1901:18\n   #29 in SfxViewFrame::Resize(bool) at sfx2/source/view/viewfrm.cxx:2695:13\n   #30 in SfxFrameViewWindow_Impl::Resize() at sfx2/source/view/viewfrm2.cxx:72:17\n   #31 in vcl::Window::ImplCallResize() at vcl/source/window/event.cxx:520:5\n   #32 in vcl::Window::Show(bool, ShowFlags) at vcl/source/window/window.cxx:2293:13\n   #33 in SfxBaseController::ConnectSfxFrame_Impl(SfxBaseController::ConnectSfxFrame) at sfx2/source/view/sfxbasecontroller.cxx:1223:24\n   #34 in SfxBaseController::attachFrame(com::sun::star::uno::Reference\u003ccom::sun::star::frame::XFrame\u003e const\u0026) at sfx2/source/view/sfxbasecontroller.cxx:530:9\n   #35 in (anonymous namespace)::SfxFrameLoader_Impl::impl_createDocumentView(com::sun::star::uno::Reference\u003ccom::sun::star::frame::XModel2\u003e const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::frame::XFrame\u003e const\u0026, comphelper::NamedValueCollection const\u0026, rtl::OUString const\u0026) at sfx2/source/view/frmload.cxx:582:18\n   #36 in (anonymous namespace)::SfxFrameLoader_Impl::load(com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::frame::XFrame\u003e const\u0026) at sfx2/source/view/frmload.cxx:702:13\n   #37 in framework::LoadEnv::impl_loadContent() at framework/source/loadenv/loadenv.cxx:1157:37\n   #38 in framework::LoadEnv::start() at framework/source/loadenv/loadenv.cxx:395:20\n   #39 in framework::LoadEnv::startLoading(rtl::OUString const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::frame::XFrame\u003e const\u0026, rtl::OUString const\u0026, int, LoadEnvFeatures) at framework/source/loadenv/loadenv.cxx:300:5\n   #40 in framework::LoadEnv::loadComponentFromURL(com::sun::star::uno::Reference\u003ccom::sun::star::frame::XComponentLoader\u003e const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::uno::XComponentContext\u003e const\u0026, rtl::OUString const\u0026, rtl::OUString const\u0026, int, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) at framework/source/loadenv/loadenv.cxx:168:14\n   #41 in framework::Desktop::loadComponentFromURL(rtl::OUString const\u0026, rtl::OUString const\u0026, int, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) at framework/source/services/desktop.cxx:593:16\n   #42 in non-virtual thunk to framework::Desktop::loadComponentFromURL(rtl::OUString const\u0026, rtl::OUString const\u0026, int, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) at framework/source/services/desktop.cxx\n   #43 in unotest::MacrosTest::loadFromDesktop(rtl::OUString const\u0026, rtl::OUString const\u0026, com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) at unotest/source/cpp/macros_test.cxx:66:62\n   #44 in SwModelTestBase::loadURL(rtl::OUString const\u0026, char const*, char const*) at sw/qa/unit/swmodeltestbase.cxx:513:19\n   #45 in SwModelTestBase::load(std::basic_string_view\u003cchar16_t, std::char_traits\u003cchar16_t\u003e \u003e, char const*, char const*) at sw/qa/inc/swmodeltestbase.hxx:309:16\n   #46 in SwModelTestBase::createSwDoc(std::basic_string_view\u003cchar16_t, std::char_traits\u003cchar16_t\u003e \u003e, char const*) at sw/qa/unit/swmodeltestbase.cxx:723:9\n   #47 in testUnfloatButton::TestBody() at sw/qa/extras/uiwriter/uiwriter2.cxx:2053:23\n  \n  0x6130002dc8b8 is located 184 bytes inside of 376-byte region [0x6130002dc800,0x6130002dc978)\n  freed by thread T0 here:\n   #0 in free at ~/github.com/llvm/llvm-project/compiler-rt/lib/asan/asan_malloc_linux.cpp:52:3\n   #1 in xmlXPathFreeContext at workdir/UnpackedTarball/libxml2/xpath.c:6155:5\n   #2 in std::_Sp_counted_deleter\u003c_xmlXPathContext*, void (*)(_xmlXPathContext*), std::allocator\u003cvoid\u003e, (__gnu_cxx::_Lock_policy)2\u003e::_M_dispose() at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/12.0.0/../../../../include/c++/12.0.0/bits/shared_ptr_base.h:515:9\n   #3 in std::_Sp_counted_base\u003c(__gnu_cxx::_Lock_policy)2\u003e::_M_release() at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/12.0.0/../../../../include/c++/12.0.0/bits/shared_ptr_base.h:343:8\n   #4 in std::__shared_count\u003c(__gnu_cxx::_Lock_policy)2\u003e::~__shared_count() at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/12.0.0/../../../../include/c++/12.0.0/bits/shared_ptr_base.h:778:11\n   #5 in std::__shared_ptr\u003c_xmlXPathContext, (__gnu_cxx::_Lock_policy)2\u003e::~__shared_ptr() at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/12.0.0/../../../../include/c++/12.0.0/bits/shared_ptr_base.h:1227:31\n   #6 in std::shared_ptr\u003c_xmlXPathContext\u003e::~shared_ptr() at ~/gcc/trunk/inst/lib/gcc/x86_64-pc-linux-gnu/12.0.0/../../../../include/c++/12.0.0/bits/shared_ptr.h:124:11\n   #7 in XPath::CXPathAPI::eval(com::sun::star::uno::Reference\u003ccom::sun::star::xml::dom::XNode\u003e const\u0026, rtl::OUString const\u0026) at unoxml/source/xpath/xpathapi.cxx:346:5\n   #8 in XPath::CXPathAPI::selectNodeList(com::sun::star::uno::Reference\u003ccom::sun::star::xml::dom::XNode\u003e const\u0026, rtl::OUString const\u0026) at unoxml/source/xpath/xpathapi.cxx:179:42\n   #9 in XPath::CXPathAPI::selectSingleNode(com::sun::star::uno::Reference\u003ccom::sun::star::xml::dom::XNode\u003e const\u0026, rtl::OUString const\u0026) at unoxml/source/xpath/xpathapi.cxx:202:40\n   #10 in non-virtual thunk to XPath::CXPathAPI::selectSingleNode(com::sun::star::uno::Reference\u003ccom::sun::star::xml::dom::XNode\u003e const\u0026, rtl::OUString const\u0026) at unoxml/source/xpath/xpathapi.cxx\n   #11 in (anonymous namespace)::SfxDocumentMetaData::init(com::sun::star::uno::Reference\u003ccom::sun::star::xml::dom::XDocument\u003e const\u0026) at sfx2/source/doc/SfxDocumentMetaData.cxx:1124:20\n   #12 in (anonymous namespace)::SfxDocumentMetaData::initialize(com::sun::star::uno::Sequence\u003ccom::sun::star::uno::Any\u003e const\u0026) at sfx2/source/doc/SfxDocumentMetaData.cxx:1977:5\n   #13 in lcl_initDocumentProperties(SvXMLImport\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::xml::dom::XSAXDocumentBuilder2\u003e const\u0026, com::sun::star::uno::Reference\u003ccom::sun::star::document::XDocumentProperties\u003e const\u0026) at xmloff/source/meta/xmlmetai.cxx:135:16\n   #14 in SvXMLMetaDocumentContext::FinishMetaElement() at xmloff/source/meta/xmlmetai.cxx:213:9\n   #15 in (anonymous namespace)::XMLDocumentBuilderContext::endFastElement(int) at xmloff/source/meta/xmlmetai.cxx:101:22\n   #16 in SvXMLImport::endFastElement(int) at xmloff/source/core/xmlimp.cxx:861:15\n   #17 in (anonymous namespace)::Entity::endElement() at sax/source/fastparser/fastparser.cxx:513:27\n   #18 in sax_fastparser::FastSaxParserImpl::callbackEndElement() at sax/source/fastparser/fastparser.cxx:1344:17\n   #19 in (anonymous namespace)::call_callbackEndElement(void*, unsigned char const*, unsigned char const*, unsigned char const*) at sax/source/fastparser/fastparser.cxx:337:18\n",
      "revId": "8c028b7e41e3d350d0e67005b16faf0159cc5c12",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "93657588_0dbfe79e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2021-12-20T08:30:58Z",
      "side": 1,
      "message": "\u003e bisecting shows this causes CppunitTest_sw_uiwriter2 to fail with\n\n...which has presumably been already addressed with \u003c213173edc5e47bb6da11f9a301f4dca71854a48c\u003e \"sw: fix crash with commit 8c028b7e41e3d350d0e67005b16faf0159cc5c12\"",
      "parentUuid": "991baa4f_e93121a4",
      "revId": "8c028b7e41e3d350d0e67005b16faf0159cc5c12",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1618cd53_57473198",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1001002
      },
      "writtenOn": "2021-12-21T10:58:17Z",
      "side": 1,
      "message": "Stephan, thanks for the bug report! I was able to fix the problem with a follow-up commit. The back port contains both of them: https://gerrit.libreoffice.org/c/core/+/127195",
      "parentUuid": "93657588_0dbfe79e",
      "revId": "8c028b7e41e3d350d0e67005b16faf0159cc5c12",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}