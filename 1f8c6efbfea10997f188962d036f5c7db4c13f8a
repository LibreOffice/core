{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "57fa1125_9a1d4d5b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2022-05-05T09:19:03Z",
      "side": 1,
      "message": "causes\n\n  warn:legacy.tools:12871:12871:tools/source/generic/poly.cxx:1581: Polygon::[]: nPos \u003e\u003d nPoints\n  \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n  \u003d\u003d12871\u003d\u003dERROR: AddressSanitizer: heap-buffer-overflow on address 0x603000445080 at pc 0x7f6303ec7854 bp 0x7ffd23271600 sp 0x7ffd232715f8\n  READ of size 8 at 0x603000445080 thread T0\n      #0 0x7f6303ec7853 in Point::X() const /include/tools/gen.hxx:83:51\n      #1 0x7f63045baaa1 in oox::drawingml::lcl_GetConnectorAdjustValue(com::sun::star::uno::Reference\u003ccom::sun::star::drawing::XShape\u003e const\u0026, tools::Polygon, com::sun::star::drawing::ConnectorType, std::__debug::vector\u003cstd::pair\u003cint, int\u003e, std::allocator\u003cstd::pair\u003cint, int\u003e \u003e \u003e\u0026) /oox/source/export/shapes.cxx:1556:27\n      #2 0x7f63045b731f in oox::drawingml::ShapeExport::WriteConnectorShape(com::sun::star::uno::Reference\u003ccom::sun::star::drawing::XShape\u003e const\u0026) /oox/source/export/shapes.cxx:1701:13\n      #3 0x7f63045984e7 in oox::drawingml::ShapeExport::WriteShape(com::sun::star::uno::Reference\u003ccom::sun::star::drawing::XShape\u003e const\u0026) /oox/source/export/shapes.cxx:1956:5\n      #4 0x7f62b399ad3b in oox::core::PowerPointExport::WriteShapeTree(std::shared_ptr\u003csax_fastparser::FastSerializerHelper\u003e const\u0026, PageType, bool) /sd/source/filter/eppt/pptx-epptooxml.cxx:1658:22\n      #5 0x7f62b39976af in oox::core::PowerPointExport::ImplWriteSlide(unsigned int, unsigned int, unsigned short, bool, com::sun::star::uno::Reference\u003ccom::sun::star::beans::XPropertySet\u003e const\u0026) /sd/source/filter/eppt/pptx-epptooxml.cxx:1392:5\n      #6 0x7f62b394addb in PPTWriterBase::CreateSlide(unsigned int) /sd/source/filter/eppt/pptx-epptbase.cxx:369:5\n      #7 0x7f62b394010e in PPTWriterBase::exportPPT(std::__debug::vector\u003ccom::sun::star::beans::PropertyValue, std::allocator\u003ccom::sun::star::beans::PropertyValue\u003e \u003e const\u0026) /sd/source/filter/eppt/pptx-epptbase.cxx:204:15\n      #8 0x7f62b3979609 in oox::core::PowerPointExport::exportDocument() /sd/source/filter/eppt/pptx-epptooxml.cxx:481:5\n      #9 0x7f63038a9238 in oox::core::FilterBase::filter(com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) /oox/source/core/filterbase.cxx:495:49\n      #10 0x7f6304a4f1b5 in oox::ppt::PowerPointImport::filter(com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) /oox/source/ppt/pptimport.cxx:226:26\n      #11 0x7f62f4dcd39c in SfxObjectShell::ExportTo(SfxMedium\u0026) /sfx2/source/doc/objstor.cxx:2482:25\n      #12 0x7f62f4dbb3d4 in SfxObjectShell::SaveTo_Impl(SfxMedium\u0026, SfxItemSet const*) /sfx2/source/doc/objstor.cxx:1551:19\n      #13 0x7f62f4dcf781 in SfxObjectShell::DoSaveAs(SfxMedium\u0026) /sfx2/source/doc/objstor.cxx:1930:17\n      #14 0x7f630e43b4e0 in SdModelTestBase::save(sd::DrawDocShell*, FileFormat const*, utl::TempFile const\u0026) /sd/qa/unit/sdmodeltestbase.hxx:274:17\n      #15 0x7f630e40aafa in SdModelTestBase::saveAndReload(sd::DrawDocShell*, int, utl::TempFile*) /sd/qa/unit/sdmodeltestbase.hxx:288:9\n      #16 0x7f630e379bcd in SdOOXMLExportTest3::testTdf114848() /sd/qa/unit/export-tests-ooxml3.cxx:225:17\n      #17 0x7f630e4b5477 in void std::__invoke_impl\u003cvoid, void (SdOOXMLExportTest3::*\u0026)(), SdOOXMLExportTest3*\u0026\u003e(std::__invoke_memfun_deref, void (SdOOXMLExportTest3::*\u0026)(), SdOOXMLExportTest3*\u0026) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/invoke.h:73:14\n      #18 0x7f630e4b50e4 in std::__invoke_result\u003cvoid (SdOOXMLExportTest3::*\u0026)(), SdOOXMLExportTest3*\u0026\u003e::type std::__invoke\u003cvoid (SdOOXMLExportTest3::*\u0026)(), SdOOXMLExportTest3*\u0026\u003e(void (SdOOXMLExportTest3::*\u0026)(), SdOOXMLExportTest3*\u0026) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/invoke.h:95:14\n      #19 0x7f630e4b4f50 in void std::_Bind\u003cvoid (SdOOXMLExportTest3::* (SdOOXMLExportTest3*))()\u003e::__call\u003cvoid, 0ul\u003e(std::tuple\u003c\u003e\u0026\u0026, std::_Index_tuple\u003c0ul\u003e) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/functional:467:11\n      #20 0x7f630e4b4bb4 in void std::_Bind\u003cvoid (SdOOXMLExportTest3::* (SdOOXMLExportTest3*))()\u003e::operator()\u003cvoid\u003e() /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/functional:549:17\n      #21 0x7f630e4b3bbc in std::_Function_handler\u003cvoid (), std::_Bind\u003cvoid (SdOOXMLExportTest3::* (SdOOXMLExportTest3*))()\u003e \u003e::_M_invoke(std::_Any_data const\u0026) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/std_function.h:316:2\n      #22 0x7f630e4b5a11 in std::function\u003cvoid ()\u003e::operator()() const /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/std_function.h:706:14\n      #23 0x7f630e4b2f28 in CppUnit::TestCaller\u003cSdOOXMLExportTest3\u003e::runTest() /workdir/UnpackedTarball/cppunit/include/cppunit/TestCaller.h:175:7\n      #24 0x7f634fe0ed9b in CppUnit::TestCaseMethodFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x296d9b)\n      #25 0x7f6335c5b8a0 in (anonymous namespace)::Protector::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /test/source/vclbootstrapprotector.cxx:46:14\n      #26 0x7f634fde357c in CppUnit::ProtectorChain::ProtectFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x26b57c)\n      #27 0x7f63407fdd40 in (anonymous namespace)::Prot::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /unotest/source/cpp/unobootstrapprotector/unobootstrapprotector.cxx:78:12\n      #28 0x7f634fde357c in CppUnit::ProtectorChain::ProtectFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x26b57c)\n      #29 0x7f6343bafc4e in (anonymous namespace)::Prot::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /unotest/source/cpp/unoexceptionprotector/unoexceptionprotector.cxx:62:16\n      #30 0x7f634fde357c in CppUnit::ProtectorChain::ProtectFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x26b57c)\n      #31 0x7f634fd80082 in CppUnit::DefaultProtector::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x208082)\n      #32 0x7f634fde357c in CppUnit::ProtectorChain::ProtectFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x26b57c)\n      #33 0x7f634fddd868 in CppUnit::ProtectorChain::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x265868)\n      #34 0x7f634fe7254d in CppUnit::TestResult::protect(CppUnit::Functor const\u0026, CppUnit::Test*, std::string const\u0026) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x2fa54d)\n      #35 0x7f634fe0d1b7 in CppUnit::TestCase::run(CppUnit::TestResult*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x2951b7)\n      #36 0x7f634fe11321 in CppUnit::TestComposite::doRunChildTests(CppUnit::TestResult*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x299321)\n      #37 0x7f634fe10578 in CppUnit::TestComposite::run(CppUnit::TestResult*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x298578)\n      #38 0x7f634fe11321 in CppUnit::TestComposite::doRunChildTests(CppUnit::TestResult*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x299321)\n      #39 0x7f634fe10578 in CppUnit::TestComposite::run(CppUnit::TestResult*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x298578)\n      #40 0x7f634fe9c816 in CppUnit::TestRunner::WrappingSuite::run(CppUnit::TestResult*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x324816)\n      #41 0x7f634fe7100e in CppUnit::TestResult::runTest(CppUnit::Test*) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x2f900e)\n      #42 0x7f634fe9d6d2 in CppUnit::TestRunner::run(CppUnit::TestResult\u0026, std::string const\u0026) (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x3256d2)\n      #43 0x50626e in (anonymous namespace)::ProtectedFixtureFunctor::run() const /sal/cppunittester/cppunittester.cxx:332:20\n      #44 0x502c58 in main2() /sal/cppunittester/cppunittester.cxx:481:16\n      #45 0x5010b1 in sal_main() /sal/cppunittester/cppunittester.cxx:647:14\n      #46 0x500efe in main /sal/cppunittester/cppunittester.cxx:642:1\n      #47 0x7f634df02554 in __libc_start_main /usr/src/debug/glibc-2.17-c758a686/csu/../csu/libc-start.c:266\n      #48 0x4257b4 in _start (/workdir/LinkTarget/Executable/cppunittester+0x4257b4)\n  \n  0x603000445080 is located 0 bytes to the right of 32-byte region [0x603000445060,0x603000445080)\n  allocated by thread T0 here:\n      #0 0x4fd848 in operator new[](unsigned long) /home/tdf/lode/packages/llvm-llvmorg-12.0.1.src/compiler-rt/lib/asan/asan_new_delete.cpp:102\n      #1 0x7f63353456fe in ImplPolygon::ImplPolygon(ImplPolygon const\u0026) /tools/source/generic/poly.cxx:73:26\n      #2 0x7f633537c604 in o3tl::cow_wrapper\u003cImplPolygon, o3tl::UnsafeRefCountingPolicy\u003e::impl_t::impl_t(ImplPolygon const\u0026) /include/o3tl/cow_wrapper.hxx:188:17\n      #3 0x7f633537c47b in o3tl::cow_wrapper\u003cImplPolygon, o3tl::UnsafeRefCountingPolicy\u003e::make_unique() /include/o3tl/cow_wrapper.hxx:303:37\n      #4 0x7f633536f528 in o3tl::cow_wrapper\u003cImplPolygon, o3tl::UnsafeRefCountingPolicy\u003e::operator-\u003e() /include/o3tl/cow_wrapper.hxx:328:56\n      #5 0x7f633535b47b in tools::Polygon::operator[](unsigned short) /tools/source/generic/poly.cxx:1581:5\n      #6 0x7f63045baa5c in oox::drawingml::lcl_GetConnectorAdjustValue(com::sun::star::uno::Reference\u003ccom::sun::star::drawing::XShape\u003e const\u0026, tools::Polygon, com::sun::star::drawing::ConnectorType, std::__debug::vector\u003cstd::pair\u003cint, int\u003e, std::allocator\u003cstd::pair\u003cint, int\u003e \u003e \u003e\u0026) /oox/source/export/shapes.cxx:1556:18\n      #7 0x7f63045b731f in oox::drawingml::ShapeExport::WriteConnectorShape(com::sun::star::uno::Reference\u003ccom::sun::star::drawing::XShape\u003e const\u0026) /oox/source/export/shapes.cxx:1701:13\n      #8 0x7f63045984e7 in oox::drawingml::ShapeExport::WriteShape(com::sun::star::uno::Reference\u003ccom::sun::star::drawing::XShape\u003e const\u0026) /oox/source/export/shapes.cxx:1956:5\n      #9 0x7f62b399ad3b in oox::core::PowerPointExport::WriteShapeTree(std::shared_ptr\u003csax_fastparser::FastSerializerHelper\u003e const\u0026, PageType, bool) /sd/source/filter/eppt/pptx-epptooxml.cxx:1658:22\n      #10 0x7f62b39976af in oox::core::PowerPointExport::ImplWriteSlide(unsigned int, unsigned int, unsigned short, bool, com::sun::star::uno::Reference\u003ccom::sun::star::beans::XPropertySet\u003e const\u0026) /sd/source/filter/eppt/pptx-epptooxml.cxx:1392:5\n      #11 0x7f62b394addb in PPTWriterBase::CreateSlide(unsigned int) /sd/source/filter/eppt/pptx-epptbase.cxx:369:5\n      #12 0x7f62b394010e in PPTWriterBase::exportPPT(std::__debug::vector\u003ccom::sun::star::beans::PropertyValue, std::allocator\u003ccom::sun::star::beans::PropertyValue\u003e \u003e const\u0026) /sd/source/filter/eppt/pptx-epptbase.cxx:204:15\n      #13 0x7f62b3979609 in oox::core::PowerPointExport::exportDocument() /sd/source/filter/eppt/pptx-epptooxml.cxx:481:5\n      #14 0x7f63038a9238 in oox::core::FilterBase::filter(com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) /oox/source/core/filterbase.cxx:495:49\n      #15 0x7f6304a4f1b5 in oox::ppt::PowerPointImport::filter(com::sun::star::uno::Sequence\u003ccom::sun::star::beans::PropertyValue\u003e const\u0026) /oox/source/ppt/pptimport.cxx:226:26\n      #16 0x7f62f4dcd39c in SfxObjectShell::ExportTo(SfxMedium\u0026) /sfx2/source/doc/objstor.cxx:2482:25\n      #17 0x7f62f4dbb3d4 in SfxObjectShell::SaveTo_Impl(SfxMedium\u0026, SfxItemSet const*) /sfx2/source/doc/objstor.cxx:1551:19\n      #18 0x7f62f4dcf781 in SfxObjectShell::DoSaveAs(SfxMedium\u0026) /sfx2/source/doc/objstor.cxx:1930:17\n      #19 0x7f630e43b4e0 in SdModelTestBase::save(sd::DrawDocShell*, FileFormat const*, utl::TempFile const\u0026) /sd/qa/unit/sdmodeltestbase.hxx:274:17\n      #20 0x7f630e40aafa in SdModelTestBase::saveAndReload(sd::DrawDocShell*, int, utl::TempFile*) /sd/qa/unit/sdmodeltestbase.hxx:288:9\n      #21 0x7f630e379bcd in SdOOXMLExportTest3::testTdf114848() /sd/qa/unit/export-tests-ooxml3.cxx:225:17\n      #22 0x7f630e4b5477 in void std::__invoke_impl\u003cvoid, void (SdOOXMLExportTest3::*\u0026)(), SdOOXMLExportTest3*\u0026\u003e(std::__invoke_memfun_deref, void (SdOOXMLExportTest3::*\u0026)(), SdOOXMLExportTest3*\u0026) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/invoke.h:73:14\n      #23 0x7f630e4b50e4 in std::__invoke_result\u003cvoid (SdOOXMLExportTest3::*\u0026)(), SdOOXMLExportTest3*\u0026\u003e::type std::__invoke\u003cvoid (SdOOXMLExportTest3::*\u0026)(), SdOOXMLExportTest3*\u0026\u003e(void (SdOOXMLExportTest3::*\u0026)(), SdOOXMLExportTest3*\u0026) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/invoke.h:95:14\n      #24 0x7f630e4b4f50 in void std::_Bind\u003cvoid (SdOOXMLExportTest3::* (SdOOXMLExportTest3*))()\u003e::__call\u003cvoid, 0ul\u003e(std::tuple\u003c\u003e\u0026\u0026, std::_Index_tuple\u003c0ul\u003e) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/functional:467:11\n      #25 0x7f630e4b4bb4 in void std::_Bind\u003cvoid (SdOOXMLExportTest3::* (SdOOXMLExportTest3*))()\u003e::operator()\u003cvoid\u003e() /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/functional:549:17\n      #26 0x7f630e4b3bbc in std::_Function_handler\u003cvoid (), std::_Bind\u003cvoid (SdOOXMLExportTest3::* (SdOOXMLExportTest3*))()\u003e \u003e::_M_invoke(std::_Any_data const\u0026) /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/std_function.h:316:2\n      #27 0x7f630e4b5a11 in std::function\u003cvoid ()\u003e::operator()() const /opt/rh/devtoolset-7/root/usr/lib/gcc/x86_64-redhat-linux/7/../../../../include/c++/7/bits/std_function.h:706:14\n      #28 0x7f630e4b2f28 in CppUnit::TestCaller\u003cSdOOXMLExportTest3\u003e::runTest() /workdir/UnpackedTarball/cppunit/include/cppunit/TestCaller.h:175:7\n      #29 0x7f634fe0ed9b in CppUnit::TestCaseMethodFunctor::operator()() const (/workdir/UnpackedTarball/cppunit/src/cppunit/.libs/libcppunit-1.15.so.1+0x296d9b)\n\nduring CppunitTest_sd_export_tests-ooxml3 CPPUNIT_TEST_NAME\u003dSdOOXMLExportTest3::testTdf114848 (\u003chttps://ci.libreoffice.org/job/lo_ubsan/2388/consoleFull#-1714579836d893063f-7f3d-4b7e-b56f-4e0f225817cd\u003e)",
      "revId": "1f8c6efbfea10997f188962d036f5c7db4c13f8a",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77b42871_45608078",
        "filename": "oox/source/export/shapes.cxx",
        "patchSetId": 9
      },
      "lineNbr": 1554,
      "author": {
        "id": 1001002
      },
      "writtenOn": "2022-05-10T07:20:25Z",
      "side": 1,
      "message": "According to Stephan\u0027s nice catch:\n\nelse if aPoly.GetSize() \u003e 4\n\n@Tibor: Maybe it\u0027s worth to check the exception, whether is there a not handled case?",
      "range": {
        "startLine": 1554,
        "startChar": 8,
        "endLine": 1554,
        "endChar": 12
      },
      "revId": "1f8c6efbfea10997f188962d036f5c7db4c13f8a",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}