{
  "comments": [
    {
      "key": {
        "uuid": "5f4e5783_b032a3a6",
        "filename": "vcl/qt5/Qt5FilePicker.cxx",
        "patchSetId": 1
      },
      "lineNbr": 190,
      "author": {
        "id": 1000562
      },
      "writtenOn": "2018-12-18T10:49:25Z",
      "side": 0,
      "message": "There should always be a parent windows of a file picker.\nMy opinion is that we don\u0027t want free floating file picker dialogs, but I might be wrong\n\nMaybe we should fall back to Application::GetAppWindow() if GetActiveWindow() returns nullptr.\n\n- What happens for other VCL backends?\n- How do you get the assertion?",
      "revId": "43a63b725208bfa378355011ea56cb936afa4411",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f4e5783_90aa0783",
        "filename": "vcl/qt5/Qt5FilePicker.cxx",
        "patchSetId": 1
      },
      "lineNbr": 190,
      "author": {
        "id": 1001976
      },
      "writtenOn": "2018-12-18T11:17:53Z",
      "side": 0,
      "message": "I\u0027m starting LO with following command after building it:\n\nLC_ALL\u003dC SAL_LOG\u003d\"-INFO\" SAL_USE_VCLPLUGIN\u003d\"qt5\" ./soffice --norestore --impress\n\nAfter it loads and \"Select a Template\" dialog is shown, I press cancel button. After that I open menu \"File\" -\u003e \"Open\", and it crashes.\n\nIt behaves same way if I start it without \"--impress\" parameter and then create new presentation, close dialog and use same menu.\n\nIt also behaves same way if I use \"--writer\" instead of \"--impress\" and open menu \"File\" -\u003e \"Open\".\n\nThis code is used only by \"qt5\" backend, even \"kde5\" backend uses different code (it uses \"KDE5FilePicker::execute\"), thus no other backend is affected.\n\nAs you can see on line 193, code using pWindow is under a condition, thus assert looks excessive. Or condition is excessive.\n\nAnd what\u0027s wrong with free floating file picker dialog?",
      "parentUuid": "5f4e5783_b032a3a6",
      "revId": "43a63b725208bfa378355011ea56cb936afa4411",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f4e5783_70b66bdc",
        "filename": "vcl/qt5/Qt5FilePicker.cxx",
        "patchSetId": 1
      },
      "lineNbr": 190,
      "author": {
        "id": 1000182
      },
      "writtenOn": "2018-12-18T11:45:31Z",
      "side": 0,
      "message": "\u003e And what\u0027s wrong with free floating file picker dialog?\n\nEverything :)\nNow seriously, what jmux likely means is that fpicker should be modal to the window that requested to open it (i.e. the input to the underlying window should be blocked as long as the fpicker remains open). And window-modality is not possible to achieve w/o a parent window",
      "parentUuid": "5f4e5783_90aa0783",
      "revId": "43a63b725208bfa378355011ea56cb936afa4411",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f4e5783_d0c63f17",
        "filename": "vcl/qt5/Qt5FilePicker.cxx",
        "patchSetId": 1
      },
      "lineNbr": 190,
      "author": {
        "id": 1000562
      },
      "writtenOn": "2018-12-18T12:51:25Z",
      "side": 0,
      "message": "So I had a look at SalGtkFilePicker::initialize and it looks like the 2nd argument is supposed to be the parent window. And Gtk+ warns in SalGtkFilePicker::execute about a missing parent, but IMHO it should also do in initialize.\n\nThe whole Qt5FilePicker was just a quick hack to have anything. It should already warn in initialize about the missing parent, if I compare it with the Gtk+ file picker.\n\nI never checked the file menu, just used the toolbar buttons, so I never realized. Since the popup menu is gone after the selection, we don\u0027t have an active window and assert. We should implement the same parent handling then Gtk+ and just warn about the missing parent.\n\nThere is nothing inherently wrong with a free floating file picker, but IMHO it\u0027s a bad UX. But I\u0027m fine with dropping the assert now, but I guess this way nobody will be motivated to fix this for good ;-(",
      "parentUuid": "5f4e5783_70b66bdc",
      "revId": "43a63b725208bfa378355011ea56cb936afa4411",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5f4e5783_909e8705",
        "filename": "vcl/qt5/Qt5FilePicker.cxx",
        "patchSetId": 1
      },
      "lineNbr": 190,
      "author": {
        "id": 1000562
      },
      "writtenOn": "2018-12-18T13:08:53Z",
      "side": 0,
      "message": "Actually - can you please move this assert removal into a 2nd patch and explaining the popup menu assert in the commit message. Eventually even mention the parentWindow handling as a TODO for the qt5 backend.\nHaving that just as a by-product of all the other stuff isn\u0027t good.",
      "parentUuid": "5f4e5783_d0c63f17",
      "revId": "43a63b725208bfa378355011ea56cb936afa4411",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615",
      "unresolved": false
    }
  ]
}