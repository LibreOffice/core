{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0a9ce98c_59187c42",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 19
      },
      "lineNbr": 0,
      "author": {
        "id": 1000045
      },
      "writtenOn": "2021-11-04T07:50:17Z",
      "side": 1,
      "message": "It looks likely that this is the culprit for \u003chttps://ci.libreoffice.org/job/lo_ubsan/2189/\u003e,\n\n  [_RUN_____] Test::testCellBroadcaster\n[...]\n  \u003d\u003d24129\u003d\u003dERROR: AddressSanitizer: heap-use-after-free on address 0x61700006c470 at pc 0x2ab6e05145e4 bp 0x7ffecaa28d70 sp 0x7ffecaa28d68\n  READ of size 8 at 0x61700006c470 thread T0\n      #0 0x2ab6e05145e3 in sc::CellStoreEvent::element_block_released(mdds::mtv::base_element_block const*) /sc/source/core/data/mtvelements.cxx:47:13\n      #1 0x2ab6de749427 in mdds::mtv::soa::multi_type_vector\u003cmdds::mtv::custom_block_func3\u003cmdds::mtv::default_element_block\u003c52, svl::SharedString\u003e, mdds::mtv::noncopyable_managed_element_block\u003c53, EditTextObject\u003e, mdds::mtv::noncopyable_managed_element_block\u003c54, ScFormulaCell\u003e \u003e, sc::CellStoreTrait\u003e::delete_element_block(unsigned long) /workdir/UnpackedTarball/mdds/include/mdds/multi_type_vector/soa/main_def.inl:403:17\n      #2 0x2ab6de74921b in mdds::mtv::soa::multi_type_vector\u003cmdds::mtv::custom_block_func3\u003cmdds::mtv::default_element_block\u003c52, svl::SharedString\u003e, mdds::mtv::noncopyable_managed_element_block\u003c53, EditTextObject\u003e, mdds::mtv::noncopyable_managed_element_block\u003c54, ScFormulaCell\u003e \u003e, sc::CellStoreTrait\u003e::delete_element_blocks(unsigned long, unsigned long) /workdir/UnpackedTarball/mdds/include/mdds/multi_type_vector/soa/main_def.inl:412:9\n      #3 0x2ab6de733225 in mdds::mtv::soa::multi_type_vector\u003cmdds::mtv::custom_block_func3\u003cmdds::mtv::default_element_block\u003c52, svl::SharedString\u003e, mdds::mtv::noncopyable_managed_element_block\u003c53, EditTextObject\u003e, mdds::mtv::noncopyable_managed_element_block\u003c54, ScFormulaCell\u003e \u003e, sc::CellStoreTrait\u003e::clear() /workdir/UnpackedTarball/mdds/include/mdds/multi_type_vector/soa/main_def.inl:1088:5\n      #4 0x2ab6df024987 in ScColumn::FreeAll() /sc/source/core/data/column3.cxx:161:13\n      #5 0x2ab6decff134 in ScColumn::~ScColumn() /sc/source/core/data/column.cxx:97:5\n      #6 0x2ab6decf708a in o3tl::default_delete\u003cScColumn\u003e::operator()(ScColumn*) /include/o3tl/deleter.hxx:55:38\n      #7 0x2ab6decf5999 in std::unique_ptr\u003cScColumn, o3tl::default_delete\u003cScColumn\u003e \u003e::reset(ScColumn*) /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/unique_ptr.h:376:4\n      #8 0x2ab6decf4c8e in ScColContainer::Clear() /sc/source/core/data/colcontainer.cxx:42:21\n      #9 0x2ab6decf4a84 in ScColContainer::~ScColContainer() /sc/source/core/data/colcontainer.cxx:33:5\n      #10 0x2ab6e070e3c6 in ScTable::~ScTable() /sc/source/core/data/table1.cxx:344:1\n      #11 0x2ab6df50abba in o3tl::default_delete\u003cScTable\u003e::operator()(ScTable*) /include/o3tl/deleter.hxx:55:38\n      #12 0x2ab6df4c3483 in std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e::~unique_ptr() /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/unique_ptr.h:268:4\n      #13 0x2ab6df4dc87c in void std::_Destroy\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e \u003e(std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*) /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/stl_construct.h:98:19\n      #14 0x2ab6df4dc7c6 in void std::_Destroy_aux\u003cfalse\u003e::__destroy\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*\u003e(std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*, std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*) /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/stl_construct.h:108:6\n      #15 0x2ab6df4dc744 in void std::_Destroy\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*\u003e(std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*, std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*) /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/stl_construct.h:136:7\n      #16 0x2ab6df4dc488 in void std::_Destroy\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*, std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e \u003e(std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*, std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*, std::allocator\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e \u003e\u0026) /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/stl_construct.h:206:7\n      #17 0x2ab6df50df73 in std::__cxx1998::vector\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e, std::allocator\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e \u003e \u003e::_M_erase_at_end(std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*) /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/stl_vector.h:1513:2\n      #18 0x2ab6df70f5b0 in std::__cxx1998::vector\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e, std::allocator\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e \u003e \u003e::clear() /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/stl_vector.h:1248:9\n      #19 0x2ab6df70b5d4 in std::__debug::vector\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e, std::allocator\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e \u003e \u003e::clear() /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/debug/vector:699:9\n      #20 0x2ab6df704cb2 in ScDocument::Clear(bool) /sc/source/core/data/documen9.cxx:506:12\n      #21 0x2ab6df490652 in ScDocument::~ScDocument() /sc/source/core/data/documen2.cxx:363:5\n      #22 0x2ab6e363315d in ScDocShell::~ScDocShell() /sc/source/ui/docshell/docsh.cxx:2925:1\n      #23 0x2ab6e363333b in ScDocShell::~ScDocShell() /sc/source/ui/docshell/docsh.cxx:2894:1\n      #24 0x2ab6e3633514 in ScDocShell::~ScDocShell() /sc/source/ui/docshell/docsh.cxx:2894:1\n      #25 0x2ab6de4f105d in SvRefBase::ReleaseRef() /include/tools/ref.hxx:163:29\n      #26 0x2ab6de4a6259 in tools::SvRef\u003cScDocShell\u003e::clear() /include/tools/ref.hxx:64:22\n      #27 0x2ab6de2b1aaa in Test::closeDocShell(tools::SvRef\u003cScDocShell\u003e\u0026) /sc/qa/unit/ucalc.cxx:365:18\n      #28 0x2ab6de2b2102 in Test::tearDown() /sc/qa/unit/ucalc.cxx:380:5\n      #29 0x2ab6de543787 in CppUnit::TestCaller\u003cTest\u003e::tearDown() /workdir/UnpackedTarball/cppunit/include/cppunit/TestCaller.h:185:15\n      #30 0x2ab69335765a in CppUnit::TestCaseMethodFunctor::operator()() const /workdir/UnpackedTarball/cppunit/src/cppunit/TestCase.cpp:32:5\n      #31 0x2ab6ae4f3957 in (anonymous namespace)::Protector::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /test/source/vclbootstrapprotector.cxx:46:14\n      #32 0x2ab693328cd7 in CppUnit::ProtectorChain::ProtectFunctor::operator()() const /workdir/UnpackedTarball/cppunit/src/cppunit/ProtectorChain.cpp:20:25\n      #33 0x2ab6a2974ff7 in (anonymous namespace)::Prot::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /unotest/source/cpp/unobootstrapprotector/unobootstrapprotector.cxx:78:12\n      #34 0x2ab693328cd7 in CppUnit::ProtectorChain::ProtectFunctor::operator()() const /workdir/UnpackedTarball/cppunit/src/cppunit/ProtectorChain.cpp:20:25\n      #35 0x2ab69f4479c2 in (anonymous namespace)::Prot::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /unotest/source/cpp/unoexceptionprotector/unoexceptionprotector.cxx:62:16\n      #36 0x2ab693328cd7 in CppUnit::ProtectorChain::ProtectFunctor::operator()() const /workdir/UnpackedTarball/cppunit/src/cppunit/ProtectorChain.cpp:20:25\n      #37 0x2ab6932bfff4 in CppUnit::DefaultProtector::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /workdir/UnpackedTarball/cppunit/src/cppunit/DefaultProtector.cpp:15:12\n      #38 0x2ab693328cd7 in CppUnit::ProtectorChain::ProtectFunctor::operator()() const /workdir/UnpackedTarball/cppunit/src/cppunit/ProtectorChain.cpp:20:25\n      #39 0x2ab69332272c in CppUnit::ProtectorChain::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /workdir/UnpackedTarball/cppunit/src/cppunit/ProtectorChain.cpp:86:18\n      #40 0x2ab6933c1b39 in CppUnit::TestResult::protect(CppUnit::Functor const\u0026, CppUnit::Test*, std::__cxx11::basic_string\u003cchar, std::char_traits\u003cchar\u003e, std::allocator\u003cchar\u003e \u003e const\u0026) /workdir/UnpackedTarball/cppunit/src/cppunit/TestResult.cpp:182:28\n      #41 0x2ab693356092 in CppUnit::TestCase::run(CppUnit::TestResult*) /workdir/UnpackedTarball/cppunit/src/cppunit/TestCase.cpp:95:11\n      #42 0x2ab693359af2 in CppUnit::TestComposite::doRunChildTests(CppUnit::TestResult*) /workdir/UnpackedTarball/cppunit/src/cppunit/TestComposite.cpp:64:30\n      #43 0x2ab693358cea in CppUnit::TestComposite::run(CppUnit::TestResult*) /workdir/UnpackedTarball/cppunit/src/cppunit/TestComposite.cpp:23:3\n      #44 0x2ab693359af2 in CppUnit::TestComposite::doRunChildTests(CppUnit::TestResult*) /workdir/UnpackedTarball/cppunit/src/cppunit/TestComposite.cpp:64:30\n      #45 0x2ab693358cea in CppUnit::TestComposite::run(CppUnit::TestResult*) /workdir/UnpackedTarball/cppunit/src/cppunit/TestComposite.cpp:23:3\n      #46 0x2ab6933ef6ce in CppUnit::TestRunner::WrappingSuite::run(CppUnit::TestResult*) /workdir/UnpackedTarball/cppunit/src/cppunit/TestRunner.cpp:47:27\n      #47 0x2ab6933c059e in CppUnit::TestResult::runTest(CppUnit::Test*) /workdir/UnpackedTarball/cppunit/src/cppunit/TestResult.cpp:149:9\n      #48 0x2ab6933f062b in CppUnit::TestRunner::run(CppUnit::TestResult\u0026, std::__cxx11::basic_string\u003cchar, std::char_traits\u003cchar\u003e, std::allocator\u003cchar\u003e \u003e const\u0026) /workdir/UnpackedTarball/cppunit/src/cppunit/TestRunner.cpp:96:14\n      #49 0x4ff1d5 in (anonymous namespace)::ProtectedFixtureFunctor::run() const /sal/cppunittester/cppunittester.cxx:329:20\n      #50 0x4fbbc5 in main2() /sal/cppunittester/cppunittester.cxx:478:16\n      #51 0x4fa052 in sal_main() /sal/cppunittester/cppunittester.cxx:614:14\n      #52 0x4f9e9e in main /sal/cppunittester/cppunittester.cxx:609:1\n      #53 0x2ab69517d554 in __libc_start_main (/lib64/libc.so.6+0x22554)\n      #54 0x425894 in _start (/workdir/LinkTarget/Executable/cppunittester+0x425894)\n  \n  0x61700006c470 is located 752 bytes inside of 768-byte region [0x61700006c180,0x61700006c480)\n  freed by thread T0 here:\n      #0 0x4f7548 in operator delete(void*, unsigned long) /home/tdf/lode/packages/llvm-llvmorg-9.0.1.src/compiler-rt/lib/asan/asan_new_delete.cc:172\n      #1 0x2ab6decf709b in o3tl::default_delete\u003cScColumn\u003e::operator()(ScColumn*) /include/o3tl/deleter.hxx:55:38\n      #2 0x2ab6decf5999 in std::unique_ptr\u003cScColumn, o3tl::default_delete\u003cScColumn\u003e \u003e::reset(ScColumn*) /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/unique_ptr.h:376:4\n      #3 0x2ab6decf4c8e in ScColContainer::Clear() /sc/source/core/data/colcontainer.cxx:42:21\n      #4 0x2ab6decf4a84 in ScColContainer::~ScColContainer() /sc/source/core/data/colcontainer.cxx:33:5\n      #5 0x2ab6e070e3c6 in ScTable::~ScTable() /sc/source/core/data/table1.cxx:344:1\n      #6 0x2ab6df50abba in o3tl::default_delete\u003cScTable\u003e::operator()(ScTable*) /include/o3tl/deleter.hxx:55:38\n      #7 0x2ab6df4c3483 in std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e::~unique_ptr() /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/unique_ptr.h:268:4\n      #8 0x2ab6df4dc87c in void std::_Destroy\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e \u003e(std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*) /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/stl_construct.h:98:19\n      #9 0x2ab6df4dc7c6 in void std::_Destroy_aux\u003cfalse\u003e::__destroy\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*\u003e(std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*, std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*) /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/stl_construct.h:108:6\n      #10 0x2ab6df4dc744 in void std::_Destroy\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*\u003e(std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*, std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*) /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/stl_construct.h:136:7\n      #11 0x2ab6df4dc488 in void std::_Destroy\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*, std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e \u003e(std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*, std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*, std::allocator\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e \u003e\u0026) /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/stl_construct.h:206:7\n      #12 0x2ab6df50df73 in std::__cxx1998::vector\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e, std::allocator\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e \u003e \u003e::_M_erase_at_end(std::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e*) /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/stl_vector.h:1513:2\n      #13 0x2ab6df70f5b0 in std::__cxx1998::vector\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e, std::allocator\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e \u003e \u003e::clear() /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/bits/stl_vector.h:1248:9\n      #14 0x2ab6df70b5d4 in std::__debug::vector\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e, std::allocator\u003cstd::unique_ptr\u003cScTable, o3tl::default_delete\u003cScTable\u003e \u003e \u003e \u003e::clear() /home/tdf/lode/opt_private/gcc-7.3.0/lib/gcc/x86_64-pc-linux-gnu/7.3.0/../../../../include/c++/7.3.0/debug/vector:699:9\n      #15 0x2ab6df704cb2 in ScDocument::Clear(bool) /sc/source/core/data/documen9.cxx:506:12\n      #16 0x2ab6df490652 in ScDocument::~ScDocument() /sc/source/core/data/documen2.cxx:363:5\n      #17 0x2ab6e363315d in ScDocShell::~ScDocShell() /sc/source/ui/docshell/docsh.cxx:2925:1\n      #18 0x2ab6e363333b in ScDocShell::~ScDocShell() /sc/source/ui/docshell/docsh.cxx:2894:1\n      #19 0x2ab6e3633514 in ScDocShell::~ScDocShell() /sc/source/ui/docshell/docsh.cxx:2894:1\n      #20 0x2ab6de4f105d in SvRefBase::ReleaseRef() /include/tools/ref.hxx:163:29\n      #21 0x2ab6de4a6259 in tools::SvRef\u003cScDocShell\u003e::clear() /include/tools/ref.hxx:64:22\n      #22 0x2ab6de2b1aaa in Test::closeDocShell(tools::SvRef\u003cScDocShell\u003e\u0026) /sc/qa/unit/ucalc.cxx:365:18\n      #23 0x2ab6de2b2102 in Test::tearDown() /sc/qa/unit/ucalc.cxx:380:5\n      #24 0x2ab6de543787 in CppUnit::TestCaller\u003cTest\u003e::tearDown() /workdir/UnpackedTarball/cppunit/include/cppunit/TestCaller.h:185:15\n      #25 0x2ab69335765a in CppUnit::TestCaseMethodFunctor::operator()() const /workdir/UnpackedTarball/cppunit/src/cppunit/TestCase.cpp:32:5\n      #26 0x2ab6ae4f3957 in (anonymous namespace)::Protector::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /test/source/vclbootstrapprotector.cxx:46:14\n      #27 0x2ab693328cd7 in CppUnit::ProtectorChain::ProtectFunctor::operator()() const /workdir/UnpackedTarball/cppunit/src/cppunit/ProtectorChain.cpp:20:25\n      #28 0x2ab6a2974ff7 in (anonymous namespace)::Prot::protect(CppUnit::Functor const\u0026, CppUnit::ProtectorContext const\u0026) /unotest/source/cpp/unobootstrapprotector/unobootstrapprotector.cxx:78:12\n      #29 0x2ab693328cd7 in CppUnit::ProtectorChain::ProtectFunctor::operator()() const /workdir/UnpackedTarball/cppunit/src/cppunit/ProtectorChain.cpp:20:25\n\nduring CppunitTest_sc_ucalc",
      "revId": "eb07a0e76fe240a184348d96a6cebf7c0a229ac0",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}