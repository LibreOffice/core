{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "298f48b3_2b62cb29",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-11-01T09:58:10Z",
      "side": 1,
      "message": "I\u0027m unsure if I should skip on all except VALID, or should only avoid INVALID (as happens on my system); and if I need to take care about the second argument to verifyCertificate (intermediates)?",
      "revId": "7f76a2daaf035f0a2b30f56d6d9776fa34bc1043",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6abcd577_c98c1fd2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2021-11-01T10:03:11Z",
      "side": 1,
      "message": "adding the author of the test...\n\nthe test is not run on WNT in jenkins - if the developer who added it didn\u0027t use WNT it\u0027s possible that it was never run there before.\n\nbut i dont know why it would fail, maybe there\u0027s some additional output with  SAL_LOG\u003d\"+INFO.xmlsecurity+WARN\" from the logging in verifyCertificate()",
      "revId": "7f76a2daaf035f0a2b30f56d6d9776fa34bc1043",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e69662ec_25e11df1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-11-01T10:12:35Z",
      "side": 1,
      "message": "Thanks - tested with the SAL_LOG configured as you suggested. Verification gives this:\n\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:812: Start verification of certificate: CN\u003d5008b16217855fa4\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:874: Verifying cert using revocation information.\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:887: Overall error status (all chains):\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:109:   CERT_TRUST_IS_NOT_TIME_VALID\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:109:   CERT_TRUST_REVOCATION_STATUS_UNKNOWN\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:109:   CERT_TRUST_IS_OFFLINE_REVOCATION\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:109:   CERT_TRUST_IS_PARTIAL_CHAIN\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:891: Error status of first chain:\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:109:   CERT_TRUST_IS_NOT_TIME_VALID\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:109:   CERT_TRUST_REVOCATION_STATUS_UNKNOWN\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:109:   CERT_TRUST_IS_OFFLINE_REVOCATION\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:109:   CERT_TRUST_IS_PARTIAL_CHAIN\n  info:xmlsecurity.xmlsec:46732:50804:xmlsecurity/source/xmlsec/mscrypt/securityenvironment_mscryptimpl.cxx:949: Certificate is invalid.\n\nAnd indeed, that certificate that exists in my Personal Certificates container, is invalid when checked using Windows\u0027 \"Manage User Certificates\" applet.",
      "parentUuid": "6abcd577_c98c1fd2",
      "revId": "7f76a2daaf035f0a2b30f56d6d9776fa34bc1043",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2886fdac_13ef1128",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2021-11-01T10:49:15Z",
      "side": 1,
      "message": "but how is this \"certificate that exists in my Personal Certificates container\" involved in verifying the one in the test document? did you import a test certificate into the Personal Certificates container? does it have the same serial number by accident?",
      "parentUuid": "e69662ec_25e11df1",
      "revId": "7f76a2daaf035f0a2b30f56d6d9776fa34bc1043",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e773f350_2443b6d1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-11-01T10:56:48Z",
      "side": 1,
      "message": "\u003e but how is this \"certificate that exists in my Personal Certificates container\" involved in verifying the one in the test document?\n\nI don\u0027t know :-D Actually I didn\u0027t check the logic there, and prior to your question, assumed that it takes a certificate from local store and signs the document then checks. Not I\u0027m puzzled, too.\n\n\u003e did you import a test certificate into the Personal Certificates container?\n\nNo I didn\u0027t myself. But that certificate gets re-added to my personal certificates after manual removal - presumably after running \u0027make check\u0027, but strangely, not always. I already asked you some time ago about this strange certificate - it was causing another failure back then. But I haven\u0027t managed to find the exact scenario to reproduce the appearance of that certificate - so couldn\u0027t debug it.",
      "parentUuid": "2886fdac_13ef1128",
      "revId": "7f76a2daaf035f0a2b30f56d6d9776fa34bc1043",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "733b1bd1_f858b390",
        "filename": "xmlsecurity/qa/unit/signing/signing.cxx",
        "patchSetId": 1
      },
      "lineNbr": 1141,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-11-01T10:27:18Z",
      "side": 1,
      "message": "I suppose that this test might need the same check, and that it only doesn\u0027t fail on my system because there\u0027s nothing (invalid) returned for ECDSA...",
      "revId": "7f76a2daaf035f0a2b30f56d6d9776fa34bc1043",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63cbdecc_7aa600f5",
        "filename": "xmlsecurity/qa/unit/signing/signing.cxx",
        "patchSetId": 1
      },
      "lineNbr": 1141,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-11-01T10:36:12Z",
      "side": 1,
      "message": "Which likely fails on our CI: one of multiple recent failures is\n\nhttps://ci.libreoffice.org/job/gerrit_linux_clang_dbgutil/100108/consoleFull#-210246804d893063f-7f3d-4b7e-b56f-4e0f225817cd",
      "parentUuid": "733b1bd1_f858b390",
      "revId": "7f76a2daaf035f0a2b30f56d6d9776fa34bc1043",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "acc8663d_e6517b94",
        "filename": "xmlsecurity/qa/unit/signing/signing.cxx",
        "patchSetId": 1
      },
      "lineNbr": 1141,
      "author": {
        "id": 1000022
      },
      "writtenOn": "2021-11-01T10:53:04Z",
      "side": 1,
      "message": "that looks like a different problem though, more duplicate xml:id\u0027s that cause verification to pick the wrong element? no indication of invalid certificate.\n\nwarn:xmlsecurity.xmlsec:11689:11689:xmlsecurity/source/xmlsec/errorcallback.cxx:53: xmltree.c:722: xmlSecAddIDs() \u0027\u0027 \u0027\u0027 12 \u0027invalid data for \u0027id\u0027: actual\u003d\u0027idPackageSignature\u0027 and expected unique id (id already defined)\u0027\nwarn:xmlsecurity.xmlsec:11689:11689:xmlsecurity/source/xmlsec/errorcallback.cxx:53: xmltree.c:722: xmlSecAddIDs() \u0027\u0027 \u0027\u0027 12 \u0027invalid data for \u0027id\u0027: actual\u003d\u0027idPackageObject\u0027 and expected unique id (id already defined)\u0027\nwarn:xmlsecurity.xmlsec:11689:11689:xmlsecurity/source/xmlsec/errorcallback.cxx:53: xmltree.c:722: xmlSecAddIDs() \u0027\u0027 \u0027\u0027 12 \u0027invalid data for \u0027id\u0027: actual\u003d\u0027idSignatureTime\u0027 and expected unique id (id already defined)\u0027\nwarn:xmlsecurity.xmlsec:11689:11689:xmlsecurity/source/xmlsec/errorcallback.cxx:53: xmltree.c:722: xmlSecAddIDs() \u0027\u0027 \u0027\u0027 12 \u0027invalid data for \u0027id\u0027: actual\u003d\u0027idOfficeObject\u0027 and expected unique id (id already defined)\u0027\nwarn:xmlsecurity.xmlsec:11689:11689:xmlsecurity/source/xmlsec/errorcallback.cxx:53: xmltree.c:722: xmlSecAddIDs() \u0027\u0027 \u0027\u0027 12 \u0027invalid data for \u0027id\u0027: actual\u003d\u0027idOfficeV1Details\u0027 and expected unique id (id already defined)\u0027\nwarn:xmlsecurity.xmlsec:11689:11689:xmlsecurity/source/xmlsec/errorcallback.cxx:53: xmltree.c:722: xmlSecAddIDs() \u0027\u0027 \u0027\u0027 12 \u0027invalid data for \u0027id\u0027: actual\u003d\u0027idSignedProperties_idPackageSignature\u0027 and expected unique id (id already defined)\u0027\nwarn:xmlsecurity.xmlsec:11689:11689:xmlsecurity/source/xmlsec/errorcallback.cxx:53: digests.c:226: xmlSecNssDigestVerify() \u0027sha256\u0027 \u0027\u0027 12 \u0027data and digest do not match\u0027\n/home/tdf/lode/jenkins/workspace/lo_gerrit/Config/linux_clang_dbgutil_64/xmlsecurity/qa/unit/signing/signing.cxx:1170:testSigningMultipleTimes_OOXML::TestBody\nequality assertion failed\n- Expected: 1\n- Actual  : 0",
      "parentUuid": "63cbdecc_7aa600f5",
      "revId": "7f76a2daaf035f0a2b30f56d6d9776fa34bc1043",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}