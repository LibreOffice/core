From 728c4d962ec0d2b1a6b2684aff8319ff9f91dbbc Mon Sep 17 00:00:00 2001
From: David Tardon <dtardon@redhat.com>
Date: Thu, 25 May 2017 16:12:20 +0200
Subject: [PATCH] really disable JPEG2000 import

---
 poppler/Stream.cc | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/poppler/Stream.cc b/poppler/Stream.cc
index 4a9babe4..ea119cb4 100644
--- a/poppler/Stream.cc
+++ b/poppler/Stream.cc
@@ -76,8 +76,6 @@
 
 #ifdef ENABLE_LIBOPENJPEG
 #include "JPEG2000Stream.h"
-#else
-#include "JPXStream.h"
 #endif
 
 #ifdef __DJGPP__
@@ -348,7 +346,8 @@ Stream *Stream::makeFilter(char *name, Stream *str, Object *params, int recursio
     globals.free();
     obj.free();
   } else if (!strcmp(name, "JPXDecode")) {
-    str = new JPXStream(str);
+    error(errSyntaxError, getPos(), "Unknown filter '{0:s}'", name);
+    str = new EOFStream(str);
   } else if (!strcmp(name, "Crypt")) {
     if (str->getKind() == strCrypt) {
       str = str->getBaseStream();
-- 
2.13.0

