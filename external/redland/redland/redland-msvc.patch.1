--- redland.orig/src/win32_rdf_config.h	2015-09-02 23:12:12.894126138 +0200
+++ redland/src/win32_rdf_config.h	2015-09-02 23:23:54.600173246 +0200
@@ -43,8 +43,11 @@
 #define HAVE_STRICMP 1
 
 /* MS names for these functions */
-#define vsnprintf _vsnprintf
+// next line breaks build on wntmsci12
+//#define vsnprintf _vsnprintf
+#if _MSC_VER < 1900 // older than VC 2015
 #define snprintf _snprintf
+#endif
 #define access _access
 #define stricmp _stricmp
 #define strnicmp _strnicmp
@@ -75,40 +78,40 @@
  */
 
 /* BDB has close method with 2 args */
-#define HAVE_BDB_CLOSE_2_ARGS 1
+// #define HAVE_BDB_CLOSE_2_ARGS 1
 
 /* BDB defines DBC */
-#define HAVE_BDB_CURSOR 1
+// #define HAVE_BDB_CURSOR 1
 
 /* BDB cursor method has 4 arguments */
-#define HAVE_BDB_CURSOR_4_ARGS 1
+// #define HAVE_BDB_CURSOR_4_ARGS 1
 
 /* BDB defines DB_TXN */
-#define HAVE_BDB_DB_TXN 1
+// #define HAVE_BDB_DB_TXN 1
 
 /* BDB has fd method with 2 args */
-#define HAVE_BDB_FD_2_ARGS 1
+// #define HAVE_BDB_FD_2_ARGS 1
 
 /* Have BDB hash support */
-#define HAVE_BDB_HASH 1
+// #define HAVE_BDB_HASH 1
 
 /* BDB has open method with 6 args */
 /* #undef HAVE_BDB_OPEN_6_ARGS */
 
 /* BDB has open method with 7 args */
-#define HAVE_BDB_OPEN_7_ARGS 1
+// #define HAVE_BDB_OPEN_7_ARGS 1
 
 /* BDB has set_flags method */
-#define HAVE_BDB_SET_FLAGS 1
+// #define HAVE_BDB_SET_FLAGS 1
 
 /* BDB has dbopen method */
 /* #undef HAVE_DBOPEN */
 
 /* BDB has db_create method */
-#define HAVE_DB_CREATE 1
+// #define HAVE_DB_CREATE 1
 
 /* Define to 1 if you have the <db.h> header file. */
-#define HAVE_DB_H 1
+// #define HAVE_DB_H 1
 
 /* Define to 1 if you have the <dlfcn.h> header file. */
 /* undef HAVE_DLFCN_H */
@@ -141,13 +144,13 @@
 /* #undef HAVE_LIBWWW */
 
 /* Have local MD5 digest */
-#define HAVE_LOCAL_MD5_DIGEST 1
+// #define HAVE_LOCAL_MD5_DIGEST 1
 
 /* Have local RIPEMD160 digest */
 /* #undef HAVE_LOCAL_RIPEMD160_DIGEST */
 
 /* Have local SHA1 digest */
-#define HAVE_LOCAL_SHA1_DIGEST 1
+// #define HAVE_LOCAL_SHA1_DIGEST 1
 
 /* Define to 1 if you have the <memory.h> header file. */
 #define HAVE_MEMORY_H 1
@@ -159,7 +162,7 @@
 #define HAVE_MKTEMP 1
 
 /* MySQL libraries are present */
-#define HAVE_MYSQL 1
+// #define HAVE_MYSQL 1
 
 /* Define to 1 if you have the <openssl/crypto.h> header file. */
 /* #undef HAVE_OPENSSL_CRYPTO_H */
@@ -178,6 +181,9 @@
 
 /* Define to 1 if you have the <pthread.h> header file. */
 /* #undef HAVE_PTHREAD_H */
+#ifdef __MINGW32__
+#undef HAVE_PTHREAD_H
+#endif
 
 /* Define to 1 if you have the <stdint.h> header file. */
 #define HAVE_STDINT_H 1
@@ -246,7 +252,7 @@
 #define SIZEOF_UNSIGNED_LONG_LONG 8
 
 /* SQLite API version */
-#define REDLAND_SQLITE_API 3
+// #define REDLAND_SQLITE_API 3
 
 /* Define to 1 if you have the ANSI C header files. */
 #define STDC_HEADERS 1
@@ -254,6 +260,9 @@
 /* Building file storage */
 #define STORAGE_FILE 1
 
+#define STORAGE_HASHES 1
+#define STORAGE_MEMORY 1
+
 /* Building MySQL storage */
 /* #define STORAGE_MYSQL 1 */
 
@@ -261,7 +270,7 @@
 /*#undef STORAGE_POSTGRESQL*/
 
 /* Building SQLite storage */
-#define STORAGE_SQLITE 1
+// #define STORAGE_SQLITE 1
 
 /* Building 3store storage */
 /*#undef STORAGE_TSTORE*/
@@ -273,7 +282,7 @@
 #define VERSION "1.0.16"
 
 /* Use POSIX threads */
-#define WITH_THREADS
+#undef WITH_THREADS
 
 /* Define to 1 if your processor stores words with the most significant byte
    first (like Motorola and SPARC, unlike Intel and VAX). */
