{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "63aa70fe_fc420a8f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000994
      },
      "writtenOn": "2021-10-25T07:36:01Z",
      "side": 1,
      "message": "Building on Thumbleweed with gcc11, I get this:\n\n\u003e cc1plus: error: unrecognized argument to \u0027-flto\u003d\u0027 option: \u0027thin\u0027\n\u003e cc1plus: note: \u0027-gsplit-dwarf\u0027 is not supported with LTO, disabling\n\nDo you have an idea how to fix?",
      "revId": "556363e1e654c1e6584e2aafeb15d0bf05d5d013",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "89e57044_08949d7e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000092
      },
      "writtenOn": "2021-10-25T08:44:55Z",
      "side": 1,
      "message": "Where exactly do you get it? The -flto\u003dthin option should be used only for Clang, and AFAICT is properly guarded by if.",
      "parentUuid": "63aa70fe_fc420a8f",
      "revId": "556363e1e654c1e6584e2aafeb15d0bf05d5d013",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27cf1ffb_f424783d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003531
      },
      "writtenOn": "2022-02-02T23:42:28Z",
      "side": 1,
      "message": "\u003e Where exactly do you get it? The -flto\u003dthin option should be used only for Clang, and AFAICT is properly guarded by if.\n\nHi Lubo≈°,\n\nI get the same on Arch Linux when trying to build LibreOffice 7.3.0.3 -- it fails with the above error when compiling skia unless clang is added as a build-time dependency (not selected as the default compiler, just installed to the build chroot).\n\nThe -flto\u003dthin option is passed to gcc via gb_CLANG_LTOFLAGS when gb_LinkTarget_use_clang is used. This appears to affect code that will opportunistically use clang if found, even though gcc is the default compiler.\n\nThe committed change addresses the case where gcc is the default compiler and clang is present on the system but breaks when clang is missing. In the latter case, -flto\u003dthin is passed to gcc which throws an \"unrecognized argument\" error during skia\u0027s build.\n\nPerhaps a possible fix might be to set gb_CLANG_LTOFLAGS to \"-flto\" so it works regardless of clang\u0027s presence on the system? (I have tested this and it does seem to work as expected.)",
      "parentUuid": "89e57044_08949d7e",
      "revId": "556363e1e654c1e6584e2aafeb15d0bf05d5d013",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bdfb636b_47813856",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000092
      },
      "writtenOn": "2022-02-04T14:14:33Z",
      "side": 1,
      "message": "Building Skia using anything else than Clang is not really supported. You can either build with Clang, or use --disable-skia, or otherwise it\u0027s up to you to support that case if you care about it.\n\nI think using plain -flto even for Clang is not a good solution, Clang\u0027s ThinLTO is used intentionally because it required less resources during building.",
      "parentUuid": "27cf1ffb_f424783d",
      "revId": "556363e1e654c1e6584e2aafeb15d0bf05d5d013",
      "serverId": "6622c302-437a-49ad-a91d-55ba7dcf1615"
    }
  ]
}